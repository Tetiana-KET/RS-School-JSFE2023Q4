var R=Object.defineProperty;var z=(s,n,e)=>n in s?R(s,n,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[n]=e;var i=(s,n,e)=>(z(s,typeof n!="symbol"?n+"":n,e),e);(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))t(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&t(c)}).observe(document,{childList:!0,subtree:!0});function e(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function t(a){if(a.ep)return;a.ep=!0;const o=e(a);fetch(a.href,o)}})();class r{constructor({tagName:n="div",text:e="",classNames:t=[],children:a=[],attributes:o={}}){i(this,"node");i(this,"children",[]);const c=document.createElement(n);if(t.length&&c.classList.add(...t),Object.keys(o).length)for(let[m,_]of Object.entries(o))typeof _=="boolean"?_?c.setAttribute(m,""):c.removeAttribute(m):c.setAttribute(m,_);c.textContent=e,this.node=c,a&&this.appendChildren(a)}appendChildren(n){n.forEach(e=>{this.append(e)})}append(n){n instanceof r&&(this.children.push(n),this.node.append(n.getNode()))}prepend(n){n instanceof r&&(this.children.push(n),this.node.prepend(n.getNode()))}getNode(){return this.node}getChildren(){return this.children}setTextContent(n){this.node.textContent=n}setAttribute(n,e){this.node.setAttribute(n,e)}removeAttribute(n){this.node.removeAttribute(n)}toggleClass(n){this.node.classList.toggle(n)}destroyChildren(){this.children.forEach(n=>{n.destroy()}),this.children.length=0}destroy(){this.destroyChildren(),this.node.remove()}}function q(s,n,e,t=!0,a=!0,o=!0){const c={firstName:s,surname:n,isLoggedIn:e,pronounceEnabled:t,translateEnabled:a,bgImageHintEnabled:o};localStorage.setItem("userData",JSON.stringify(c))}function x(){const s=localStorage.getItem("userData");return s?JSON.parse(s):null}function I(s,n,e){const t=localStorage.getItem(s);let a=t?JSON.parse(t):{};a[n]=e,localStorage.setItem(s,JSON.stringify(a))}function k(s,n){const e=localStorage.getItem(s);return(e?JSON.parse(e):{})[n]}const M="_footer_1ex95_3",G="_footer-container_1ex95_27",U="_social-items_1ex95_45",V="_social-item_1ex95_45",J="_developer_1ex95_79",Z="_social-item-link_1ex95_79",K="_rs-icon-wrap_1ex95_97",Y="_rsschool-link_1ex95_113",u={footer:M,"footer-container":"_footer-container_1ex95_27",footerContainer:G,"social-items":"_social-items_1ex95_45",socialItems:U,"social-item":"_social-item_1ex95_45",socialItem:V,developer:J,"social-item-link":"_social-item-link_1ex95_79",socialItemLink:Z,"rs-icon-wrap":"_rs-icon-wrap_1ex95_97",rsIconWrap:K,"rsschool-link":"_rsschool-link_1ex95_113",rsschoolLink:Y};class P extends r{constructor(){super({tagName:"footer",classNames:[u.footer]}),this.render()}render(){this.node.innerHTML=`
    <div class="${u.footerContainer}">

      <ul class="${u.socialItems} ${u.developer}">
        <li class="${u.socialItem}">
          <a class="${u.socialItemLink}" href="https://github.com/Tetiana-KET" target="_blank">
            Tetiana
          </a>
        </li>
        <li class="${u.socialItem}">
          <a class="${u.socialItemLink}" href="https://github.com/Tetiana-KET" target="_blank">
            <svg viewBox="64 64 896 896" focusable="false" data-icon="github" width="1em" height="1em" fill="#da90ef" aria-hidden="true"><path d="M511.6 76.3C264.3 76.2 64 276.4 64 523.5 64 718.9 189.3 885 363.8 946c23.5 5.9 19.9-10.8 19.9-22.2v-77.5c-135.7 15.9-141.2-73.9-150.3-88.9C215 726 171.5 718 184.5 703c30.9-15.9 62.4 4 98.9 57.9 26.4 39.1 77.9 32.5 104 26 5.7-23.5 17.9-44.5 34.7-60.8-140.6-25.2-199.2-111-199.2-213 0-49.5 16.3-95 48.3-131.7-20.4-60.5 1.9-112.3 4.9-120 58.1-5.2 118.5 41.6 123.2 45.3 33-8.9 70.7-13.6 112.9-13.6 42.4 0 80.2 4.9 113.5 13.9 11.3-8.6 67.3-48.8 121.3-43.9 2.9 7.7 24.7 58.3 5.5 118 32.4 36.8 48.9 82.7 48.9 132.3 0 102.2-59 188.1-200 212.9a127.5 127.5 0 0138.1 91v112.5c.8 9 0 17.9 15 17.9 177.1-59.7 304.6-227 304.6-424.1 0-247.2-200.4-447.3-447.5-447.3z"></path></svg>
          </a>
        </li>
      </ul>

      <div class="${u.rsIconWrap} ${u.rsIconWrap}">
        <a href="https://rs.school/" class="${u.socialItem} ${u.rsschoolLink}" target="_blank">
        </a>
      </div>

      <ul class="${u.socialItems} ${u.rsSchool}">
        <li class="${u.socialItem}">
          <a class="${u.socialItemLink}" href="https://github.com/rolling-scopes/rsschool-app" target="_blank">
            <svg viewBox="64 64 896 896" focusable="false" data-icon="github" width="1em" height="1em" fill="#da90ef" aria-hidden="true"><path d="M511.6 76.3C264.3 76.2 64 276.4 64 523.5 64 718.9 189.3 885 363.8 946c23.5 5.9 19.9-10.8 19.9-22.2v-77.5c-135.7 15.9-141.2-73.9-150.3-88.9C215 726 171.5 718 184.5 703c30.9-15.9 62.4 4 98.9 57.9 26.4 39.1 77.9 32.5 104 26 5.7-23.5 17.9-44.5 34.7-60.8-140.6-25.2-199.2-111-199.2-213 0-49.5 16.3-95 48.3-131.7-20.4-60.5 1.9-112.3 4.9-120 58.1-5.2 118.5 41.6 123.2 45.3 33-8.9 70.7-13.6 112.9-13.6 42.4 0 80.2 4.9 113.5 13.9 11.3-8.6 67.3-48.8 121.3-43.9 2.9 7.7 24.7 58.3 5.5 118 32.4 36.8 48.9 82.7 48.9 132.3 0 102.2-59 188.1-200 212.9a127.5 127.5 0 0138.1 91v112.5c.8 9 0 17.9 15 17.9 177.1-59.7 304.6-227 304.6-424.1 0-247.2-200.4-447.3-447.5-447.3z"></path></svg>
          </a>
        </li>
        <li class="${u.socialItem}">
          <a class="${u.socialItemLink}" href="https://www.youtube.com/c/rollingscopesschool" target="_blank">
            <svg viewBox="64 64 896 896" focusable="false" data-icon="youtube" width="1em" height="1em" fill="#da90ef" aria-hidden="true"><path d="M941.3 296.1a112.3 112.3 0 00-79.2-79.3C792.2 198 512 198 512 198s-280.2 0-350.1 18.7A112.12 112.12 0 0082.7 296C64 366 64 512 64 512s0 146 18.7 215.9c10.3 38.6 40.7 69 79.2 79.3C231.8 826 512 826 512 826s280.2 0 350.1-18.8c38.6-10.3 68.9-40.7 79.2-79.3C960 658 960 512 960 512s0-146-18.7-215.9zM423 646V378l232 133-232 135z"></path></svg>
          </a>
        </li>
        <li class="${u.socialItem}">
          <a class="${u.socialItemLink}" href="https://discord.com/invite/PRADsJB" target="_blank">
            <svg width="1em" height="1em" fill="#da90ef" viewBox="0 -7 71 71" xmlns="http://www.w3.org/2000/svg"><g><path d="M60.1045 4.8978C55.5792 2.8214 50.7265 1.2916 45.6527 0.41542C45.5603 0.39851 45.468 0.440769 45.4204 0.525289C44.7963 1.6353 44.105 3.0834 43.6209 4.2216C38.1637 3.4046 32.7345 3.4046 27.3892 4.2216C26.905 3.0581 26.1886 1.6353 25.5617 0.525289C25.5141 0.443589 25.4218 0.40133 25.3294 0.41542C20.2584 1.2888 15.4057 2.8186 10.8776 4.8978C10.8384 4.9147 10.8048 4.9429 10.7825 4.9795C1.57795 18.7309 -0.943561 32.1443 0.293408 45.3914C0.299005 45.4562 0.335386 45.5182 0.385761 45.5576C6.45866 50.0174 12.3413 52.7249 18.1147 54.5195C18.2071 54.5477 18.305 54.5139 18.3638 54.4378C19.7295 52.5728 20.9469 50.6063 21.9907 48.5383C22.0523 48.4172 21.9935 48.2735 21.8676 48.2256C19.9366 47.4931 18.0979 46.6 16.3292 45.5858C16.1893 45.5041 16.1781 45.304 16.3068 45.2082C16.679 44.9293 17.0513 44.6391 17.4067 44.3461C17.471 44.2926 17.5606 44.2813 17.6362 44.3151C29.2558 49.6202 41.8354 49.6202 53.3179 44.3151C53.3935 44.2785 53.4831 44.2898 53.5502 44.3433C53.9057 44.6363 54.2779 44.9293 54.6529 45.2082C54.7816 45.304 54.7732 45.5041 54.6333 45.5858C52.8646 46.6197 51.0259 47.4931 49.0921 48.2228C48.9662 48.2707 48.9102 48.4172 48.9718 48.5383C50.038 50.6034 51.2554 52.5699 52.5959 54.435C52.6519 54.5139 52.7526 54.5477 52.845 54.5195C58.6464 52.7249 64.529 50.0174 70.6019 45.5576C70.6551 45.5182 70.6887 45.459 70.6943 45.3942C72.1747 30.0791 68.2147 16.7757 60.1968 4.9823C60.1772 4.9429 60.1437 4.9147 60.1045 4.8978ZM23.7259 37.3253C20.2276 37.3253 17.3451 34.1136 17.3451 30.1693C17.3451 26.225 20.1717 23.0133 23.7259 23.0133C27.308 23.0133 30.1626 26.2532 30.1066 30.1693C30.1066 34.1136 27.28 37.3253 23.7259 37.3253ZM47.3178 37.3253C43.8196 37.3253 40.9371 34.1136 40.9371 30.1693C40.9371 26.225 43.7636 23.0133 47.3178 23.0133C50.9 23.0133 53.7545 26.2532 53.6986 30.1693C53.6986 34.1136 50.9 37.3253 47.3178 37.3253Z"></path></g></svg>
          </a>
        </li>
      </ul>
    </div>
    `}}function Q(){const s=x();return s?`Welcome, ${s.firstName} ${s.surname}!`:"Welcome!"}function X(){const s=x();return!!(s&&s.isLoggedIn)}async function ee(s){try{return await(await fetch(`https://raw.githubusercontent.com/rolling-scopes-school/rss-puzzle-data/main/data/wordCollectionLevel${s}.json`)).json()}catch(n){throw n}}async function te(s,n){const e="https://raw.githubusercontent.com/rolling-scopes-school/rss-puzzle-data/main/";try{const t=n,o=await(await fetch(`${e}${s}`)).arrayBuffer();return await t.decodeAudioData(o)}catch{throw new Error}}async function ne(s){const n=`https://raw.githubusercontent.com/rolling-scopes-school/rss-puzzle-data/main/images/${s}`;try{const t=await(await fetch(n)).blob(),a=URL.createObjectURL(t),o=new Image;return o.src=a,new Promise((c,m)=>{o.onload=()=>c(o),o.onerror=_=>m(_)})}catch{throw new Error}}const ae="_header_1dbbl_1",se="_header-container_1dbbl_27",ie="_logout-btn_1dbbl_43",oe="_header-logo_1dbbl_91",re="_user-greeting_1dbbl_99",ce="_masked_1dbbl_1",le="_fadeInDown_1dbbl_1",B={header:ae,"header-container":"_header-container_1dbbl_27",headerContainer:se,"logout-btn":"_logout-btn_1dbbl_43",logoutBtn:ie,"header-logo":"_header-logo_1dbbl_91",headerLogo:oe,"user-greeting":"_user-greeting_1dbbl_99",userGreeting:re,masked:ce,fadeInDown:le};class $ extends r{constructor(){super({tagName:"header",classNames:[B.header]});i(this,"headerContainer");i(this,"headerLogo");i(this,"userGreeting");i(this,"logoutBtn");this.headerContainer=new r({tagName:"div",classNames:[B.headerContainer]}),this.append(this.headerContainer),this.headerLogo=new r({tagName:"h2",text:"RSS Puzzle",classNames:[B.headerLogo]}),this.headerContainer.append(this.headerLogo),this.userGreeting=new r({tagName:"p",classNames:[B.userGreeting],attributes:{id:"userGreeting"}}),this.userGreeting.setTextContent(`${Q()}`),this.headerContainer.append(this.userGreeting),this.logoutBtn=new r({tagName:"button",text:"Log out",classNames:[B.logoutBtn]}),this.headerContainer.append(this.logoutBtn),this.logoutBtn.getNode().addEventListener("click",this.handleLogout.bind(this))}handleLogout(){localStorage.removeItem("userData"),localStorage.setItem("isPlaying","false"),document.body.firstChild&&document.body.removeChild(document.body.firstChild),document.body.prepend(new j().getNode())}}const de="_start-screen_1vsw2_1",ue="_main-content-wrapper_1vsw2_17",he="_game-description_1vsw2_53",ge="_start-btn_1vsw2_61",w={"start-screen":"_start-screen_1vsw2_1",startScreen:de,"main-content-wrapper":"_main-content-wrapper_1vsw2_17",mainContentWrapper:ue,"game-description":"_game-description_1vsw2_53",gameDescription:he,"start-btn":"_start-btn_1vsw2_61",startBtn:ge},T="/assets/bg-DPnWjdPh.jpg";function me(s,n){k("userData","translateEnabled")?(s.translationWrap.getNode().removeAttribute("data-active"),n.removeAttribute("active-hint"),I("userData","translateEnabled",!1)):(s.translationWrap.getNode().setAttribute("data-active","true"),n.setAttribute("active-hint","true"),s.displayTranslation(),I("userData","translateEnabled",!0))}function pe(s,n){k("userData","pronounceEnabled")?(n.setAttribute("disabled","true"),s.removeAttribute("active-hint"),I("userData","pronounceEnabled",!1)):(n.removeAttribute("disabled"),s.setAttribute("active-hint","true"),I("userData","pronounceEnabled",!0))}function be(s,n){k("userData","bgImageHintEnabled")?(s.header.getNode().querySelector("#bgImageHint").removeAttribute("data-active"),s.gameWrap.getNode().setAttribute("bg-image-disabled","true"),n.removeAttribute("active-hint"),Array.from(s.gameSourceDataBlock.getNode().children).forEach(t=>{t.setAttribute("bg-image-disabled","true")}),I("userData","bgImageHintEnabled",!1)):(n.setAttribute("active-hint","true"),s.header.getNode().querySelector("#bgImageHint").setAttribute("data-active","true"),s.gameWrap.getNode().removeAttribute("bg-image-disabled"),Array.from(s.gameSourceDataBlock.getNode().children).forEach(t=>{t.removeAttribute("bg-image-disabled")}),I("userData","bgImageHintEnabled",!0))}const fe="_game-header-container_10k3u_1",_e="_header-container_10k3u_25",Ne="_game-header-options_10k3u_43",Ce="_page-select-option_10k3u_53",ve="_select-level-option_10k3u_55",ye="_select_10k3u_55",ke="_game-clues-wrap_10k3u_87",Ie="_clue-button_10k3u_97",Se="_translate-hint_10k3u_119",Be="_pronunciation-hint_10k3u_129",we="_play-sound-button_10k3u_139",Le="_bg-image-hint_10k3u_149",Ae="_shake_10k3u_1",g={"game-header-container":"_game-header-container_10k3u_1",gameHeaderContainer:fe,"header-container":"_header-container_10k3u_25",headerContainer:_e,"game-header-options":"_game-header-options_10k3u_43",gameHeaderOptions:Ne,"page-select-option":"_page-select-option_10k3u_53",pageSelectOption:Ce,"select-level-option":"_select-level-option_10k3u_55",selectLevelOption:ve,select:ye,"game-clues-wrap":"_game-clues-wrap_10k3u_87",gameCluesWrap:ke,"clue-button":"_clue-button_10k3u_97",clueButton:Ie,"translate-hint":"_translate-hint_10k3u_119",translateHint:Se,"pronunciation-hint":"_pronunciation-hint_10k3u_129",pronunciationHint:Be,"play-sound-button":"_play-sound-button_10k3u_139",playSoundButton:we,"bg-image-hint":"_bg-image-hint_10k3u_149",bgImageHint:Le,shake:Ae};class Ee extends r{constructor(e){super({tagName:"div",classNames:[g.gameHeaderContainer]});i(this,"headerContainer");i(this,"gameHeaderOptions");i(this,"selectLevelOption");i(this,"selectPageOption");i(this,"playSoundButton");i(this,"gameCluesWrap");i(this,"gamePageInstance");i(this,"audioContext",new AudioContext);i(this,"audio",null);this.gamePageInstance=e,this.headerContainer=new r({tagName:"div",classNames:[g.headerContainer]}),this.append(this.headerContainer),this.gameHeaderOptions=new r({tagName:"div",classNames:[g.gameHeaderOptions]}),this.headerContainer.append(this.gameHeaderOptions),this.selectLevelOption=document.createElement("select"),this.selectLevelOption.classList.add(g.selectLevelOption,g.select);for(let t=1;t<=10;t++){const a=document.createElement("option");a.value=`Level ${t}`,a.textContent=`Level ${t}`,this.selectLevelOption.appendChild(a)}this.gameHeaderOptions.getNode().append(this.selectLevelOption),this.selectPageOption=document.createElement("select"),this.selectPageOption.classList.add(g.pageSelectOption,g.select);for(let t=1;t<=10;t++){const a=document.createElement("option");a.value=`Page ${t}`,a.textContent=`Page ${t}`,this.selectPageOption.appendChild(a)}this.gameHeaderOptions.getNode().append(this.selectPageOption),this.playSoundButton=new r({tagName:"button",classNames:[g.playSoundButton,g.clueButton],attributes:{id:"playSoundButton"}}),this.headerContainer.append(this.playSoundButton),this.playSoundButton.getNode().addEventListener("click",this.handleClick.bind(this)),this.gameCluesWrap=new r({tagName:"div",classNames:[g.gameCluesWrap]}),this.headerContainer.append(this.gameCluesWrap);for(let t=1;t<=3;t++){const a=document.createElement("button");a.classList.add(g.clueButton),this.gameCluesWrap.getNode().appendChild(a)}this.gameCluesWrap.getNode().children[0].classList.add(`${g.translateHint}`),this.gameCluesWrap.getNode().children[0].setAttribute("id","translateHint"),this.gameCluesWrap.getNode().children[1].classList.add(`${g.pronunciationHint}`),this.gameCluesWrap.getNode().children[1].setAttribute("id","pronunciationHint"),this.gameCluesWrap.getNode().children[2].classList.add(`${g.bgImageHint}`),this.gameCluesWrap.getNode().children[2].setAttribute("id","bgImageHint"),this.toggleDefaultSettings(),this.gameCluesWrap.getNode().addEventListener("click",this.handleClick.bind(this))}toggleDefaultSettings(){this.gamePageInstance.isTranslateEnabled?this.gameCluesWrap.getNode().children[0].setAttribute("active-hint","true"):this.gamePageInstance.isPronounceEnabled?this.gameCluesWrap.getNode().children[1].setAttribute("active-hint","true"):this.gamePageInstance.isBgImageHintEnabled&&this.gameCluesWrap.getNode().children[2].setAttribute("active-hint","true")}async handleClick(e){var a,o,c;const t=e.target;t&&t.classList.contains(`${g.clueButton}`)&&(t.classList.contains(`${g.translateHint}`)&&me(this.gamePageInstance,t),t.classList.contains(`${g.pronunciationHint}`)&&pe(t,this.playSoundButton),t.classList.contains(`${g.playSoundButton}`)&&(t.setAttribute("active-hint","true"),this.gamePageInstance.audioExample=(c=(o=(a=this.gamePageInstance.fetchedWordData)==null?void 0:a.rounds[this.gamePageInstance.currentRound])==null?void 0:o.words[this.gamePageInstance.currentSentenceIndex])==null?void 0:c.audioExample,await this.getAudio(),this.playAudio()),t.classList.contains(`${g.bgImageHint}`)&&be(this.gamePageInstance,t))}async getAudio(){var e,t,a;if(this.gamePageInstance.audioExample=(a=(t=(e=this.gamePageInstance.fetchedWordData)==null?void 0:e.rounds[this.gamePageInstance.currentRound])==null?void 0:t.words[this.gamePageInstance.currentSentenceIndex])==null?void 0:a.audioExample,this.gamePageInstance.audioExample)try{this.audio=await te(this.gamePageInstance.audioExample,this.audioContext)}catch(o){console.error("Error fetching audio:",o)}}playAudio(){if(this.audio){this.playSoundButton.setAttribute("isPlaying","true");const e=this.audioContext.createBufferSource();e.buffer=this.audio,e.connect(this.audioContext.destination),e.onended=()=>{this.playSoundButton.removeAttribute("isPlaying")},e.start(this.audioContext.currentTime)}}}const We="_game-page-bg_3j743_1",xe="_game-page-container_3j743_9",Pe="_game-wrap_3j743_25",$e="_game-source-data-block_3j743_27",Te="_main-content-wrapper_3j743_39",De="_translation-wrap_3j743_67",He="_sentence-line_3j743_153",Oe="_word-card_3j743_191",Fe="_wrong-order_3j743_253",je="_selected_3j743_263",b={"game-page-bg":"_game-page-bg_3j743_1",gamePageBg:We,"game-page-container":"_game-page-container_3j743_9",gamePageContainer:xe,"game-wrap":"_game-wrap_3j743_25",gameWrap:Pe,"game-source-data-block":"_game-source-data-block_3j743_27",gameSourceDataBlock:$e,"main-content-wrapper":"_main-content-wrapper_3j743_39",mainContentWrapper:Te,"translation-wrap":"_translation-wrap_3j743_67",translationWrap:De,"sentence-line":"_sentence-line_3j743_153",sentenceLine:He,"word-card":"_word-card_3j743_191",wordCard:Oe,"wrong-order":"_wrong-order_3j743_253",wrongOrder:Fe,selected:je};function Re(s){const n=s.slice();for(let e=n.length-1;e>0;e--){const t=Math.floor(Math.random()*(e+1));[n[e],n[t]]=[n[t],n[e]]}return n}function ze(s,n,e,t,a,o){const c=s.split(" "),m=[],_=document.querySelector(`.${n}`).clientWidth,d=document.querySelector(`.${n}`).clientHeight,N=d/e,p=N*t,f=D(s,o);let y=0;return c.forEach((h,S)=>{const L=h.length*f,C=new r({tagName:"div",text:h,attributes:{"data-index":S.toString(),"data-value":h}});C.getNode().style.width=`${L}px`,C.getNode().style.height=`${N}px`,C.getNode().style.backgroundImage=`url(${a})`,C.getNode().style.backgroundSize=`${_}px ${d}px`,C.getNode().style.backgroundPosition=`-${y}px ${-p}px`,m.push(C.getNode()),y+=L}),m}function D(s,n){const e=n.getNode(),t=s.split(" ").reduce((a,o)=>a+o.length,0);return Math.floor(e.clientWidth-2)/t}function qe(s,n,e,t,a,o,c,m,_){s.forEach(d=>{d.addEventListener("mousedown",()=>{d.classList.add(o)}),d.addEventListener("mouseup",()=>{setTimeout(()=>{d.classList.remove(o)},100)}),d.addEventListener("click",()=>{var C,E,W;let N=!1;const p=(C=m.getNode().lastChild)==null?void 0:C.lastChild,f=(E=m.getNode().lastChild)==null?void 0:E.firstChild,y=(W=m.getNode().firstChild)==null?void 0:W.firstChild,h=document.querySelector(`.${e}`),S=Array.from(n.getNode().querySelectorAll(`.${t}`))[a],L=Array.from(S.querySelectorAll('div[bg-image-disabled="true"]'));d.parentElement&&(d.parentElement.className===e?(d.remove(),S.append(d),(h==null?void 0:h.children.length)===0&&(f.removeAttribute("disabled"),y.setAttribute("disabled","disabled"),N=H(c,S),N&&m.getNode().lastChild!==null&&(p.removeAttribute("disabled"),p.removeAttribute("invisible"),f.setAttribute("invisible","true"),_.displayTranslation(),_.translationWrap.getNode().setAttribute("data-active","true"),d.getAttribute("bg-image-disabled")&&(d.removeAttribute("bg-image-disabled"),L.forEach(A=>{A.removeAttribute("bg-image-disabled")}))))):d.parentElement.className===t&&(d.remove(),document.querySelector(`.${e}`).append(d),d.classList.remove(`${b.wrongOrder}`))),(N===!1||(h==null?void 0:h.children.length)!==0)&&(p.setAttribute("disabled","disabled"),p.setAttribute("invisible","true"),f.removeAttribute("invisible")),(N===!0||(h==null?void 0:h.children.length))!==0&&(f.setAttribute("disabled","disabled"),s.forEach(A=>{A.classList.remove(`${b.wrongOrder}`)}))})})}function H(s,n){let e;return n.children&&(e=Array.from(n.children).map(t=>t.getAttribute("data-value")).join(" ")),s===e}function Me(s){Array.from(s.children).forEach((e,t)=>{t!==Number(e.getAttribute("data-index"))&&e.classList.add(`${b.wrongOrder}`)})}const Ge="_game-buttons-block_1as5n_1",Ue="_check-button-wrap_1as5n_17",Ve="_complete-button-wrap_1as5n_19",Je="_button_1as5n_37",v={"game-buttons-block":"_game-buttons-block_1as5n_1",gameButtonsBlock:Ge,"check-button-wrap":"_check-button-wrap_1as5n_17",checkButtonWrap:Ue,"complete-button-wrap":"_complete-button-wrap_1as5n_19",completeButtonWrap:Ve,button:Je};class Ze extends r{constructor(e){super({tagName:"div",classNames:[v.gameButtonsBlock]});i(this,"checkButton");i(this,"continueButton");i(this,"autoCompleteButton");i(this,"checkButtonWrap");i(this,"completeButtonWrap");i(this,"gamePageInstance");this.gamePageInstance=e,this.completeButtonWrap=new r({tagName:"div",classNames:[v.completeButtonWrap]}),this.append(this.completeButtonWrap),this.checkButtonWrap=new r({tagName:"div",classNames:[v.checkButtonWrap]}),this.append(this.checkButtonWrap),this.autoCompleteButton=new r({tagName:"button",classNames:[v.button,v.autoCompleteButton],text:"Auto-complete",attributes:{type:"button"}}),this.completeButtonWrap.append(this.autoCompleteButton),this.checkButton=new r({tagName:"button",text:"Check",classNames:[v.button,v.checkButton],attributes:{type:"button",disabled:!0}}),this.checkButtonWrap.append(this.checkButton),this.continueButton=new r({tagName:"button",classNames:[v.button],text:"Continue",attributes:{type:"button",disabled:!0,invisible:"true"}}),this.checkButtonWrap.append(this.continueButton),this.checkButton.getNode().addEventListener("click",this.handleCheckButtonClick.bind(this)),this.continueButton.getNode().addEventListener("click",this.handleContinueButtonClick.bind(this)),this.autoCompleteButton.getNode().addEventListener("click",this.handleAutoCompleteButtonClick.bind(this))}handleCheckButtonClick(){this.autoCompleteButton.removeAttribute("disabled");const e=this.gamePageInstance.currentSentenceIndex,t=Array.from(this.gamePageInstance.gameWrap.getNode().children)[e];Me(t)}handleContinueButtonClick(){var e,t,a;this.gamePageInstance.currentSentenceIndex+=1,this.gamePageInstance.audioExample=(a=(t=(e=this.gamePageInstance.fetchedWordData)==null?void 0:e.rounds[this.gamePageInstance.currentRound])==null?void 0:t.words[this.gamePageInstance.currentSentenceIndex])==null?void 0:a.audioExample,this.gamePageInstance.getImageForRound(),console.log("from CONTINUE button click: ",this.gamePageInstance.audioExample),this.gamePageInstance.currentSentenceIndex<this.gamePageInstance.sentencesForRound.length&&(this.continueButton.setAttribute("disabled","disabled"),this.continueButton.setAttribute("invisible","true"),this.checkButton.setAttribute("disabled","disabled"),this.checkButton.removeAttribute("invisible"),this.autoCompleteButton.removeAttribute("disabled"),this.gamePageInstance.displaySentence(),this.gamePageInstance.isTranslateEnabled=this.gamePageInstance.checkIsTranslateEnabled(),this.gamePageInstance.isTranslateEnabled?this.gamePageInstance.displayTranslation():this.gamePageInstance.translationWrap.getNode().removeAttribute("data-active"))}handleAutoCompleteButtonClick(){this.autoCompleteButton.setAttribute("disabled","disabled"),this.gamePageInstance.autoCompleteSentence()}}class O extends r{constructor(){super({tagName:"div",classNames:[b.gamePageBg]});i(this,"gamePageContainer");i(this,"mainHeader");i(this,"header");i(this,"mainContent");i(this,"gameWrap");i(this,"gameSourceDataBlock");i(this,"gameButtonsBlock");i(this,"footer");i(this,"fetchedWordData",null);i(this,"currentLevel",1);i(this,"currentRound",0);i(this,"sentencesForRound",[]);i(this,"currentSentenceIndex",0);i(this,"currentSentenceCards");i(this,"currentSentence");i(this,"audioExample");i(this,"translationWrap");i(this,"isTranslateEnabled",!0);i(this,"isPronounceEnabled",!0);i(this,"isBgImageHintEnabled",!0);i(this,"imageSource","");i(this,"imageUrl","");this.currentSentenceCards=[],this.currentSentence="",this.isTranslateEnabled=this.checkIsTranslateEnabled(),this.isPronounceEnabled=this.checkIsPronounceEnabled(),this.isBgImageHintEnabled=this.checkIsBgImageHintEnabled(),this.getNode().style.backgroundImage=`url(${T})`,this.getNode().style.backgroundRepeat="no-repeat",this.getNode().style.backgroundPosition="center",this.gamePageContainer=new r({tagName:"div",classNames:[b.gamePageContainer]}),this.append(this.gamePageContainer),this.mainHeader=new $,this.gamePageContainer.append(this.mainHeader),this.mainHeader.getNode().style.background="rgba(3, 6, 25, 0.7)";const e=this.mainHeader.getNode().querySelector("#userGreeting");e&&(e.style.visibility="hidden"),this.mainContent=new r({tagName:"main",classNames:[b.mainContentWrapper]}),this.gamePageContainer.append(this.mainContent),this.header=new Ee(this),this.mainContent.append(this.header),this.translationWrap=new r({tagName:"div",classNames:[b.translationWrap]}),this.mainContent.append(this.translationWrap),this.gameWrap=new r({tagName:"div",classNames:[b.gameWrap]}),this.mainContent.append(this.gameWrap);for(let t=1;t<=10;t++){const a=document.createElement("div");a.classList.add(b.sentenceLine),this.gameWrap.getNode().appendChild(a)}this.gameSourceDataBlock=new r({tagName:"div",classNames:[b.gameSourceDataBlock]}),this.mainContent.append(this.gameSourceDataBlock),this.gameButtonsBlock=new Ze(this),this.mainContent.append(this.gameButtonsBlock),this.footer=new P,this.gamePageContainer.append(this.footer),this.fetchWordData(),window.addEventListener("resize",()=>{this.currentSentenceCards.length&&this.setCardsWidth(this.currentSentenceCards)})}fetchWordData(){ee(this.currentLevel).then(e=>{this.fetchedWordData=e,this.handleFetchedData(),this.displaySentence(),this.getImageForRound()}).catch(e=>{console.error("Error fetching data:",e)})}handleFetchedData(){var e,t,a;this.fetchedWordData&&(this.sentencesForRound=this.fetchedWordData.rounds[this.currentRound].words.map(o=>o.textExample),this.audioExample=(a=(t=(e=this.fetchedWordData)==null?void 0:e.rounds[this.currentRound])==null?void 0:t.words[this.currentSentenceIndex])==null?void 0:a.audioExample,this.imageSource=this.fetchedWordData.rounds[this.currentRound].levelData.imageSrc,this.isTranslateEnabled&&(this.translationWrap.getNode().setAttribute("data-active","true"),this.header.getNode().querySelector("#translateHint").setAttribute("active-hint","true"),this.displayTranslation()),this.isPronounceEnabled?(this.header.getNode().querySelector("#playSoundButton").removeAttribute("disabled"),this.header.getNode().querySelector("#pronunciationHint").setAttribute("active-hint","true")):this.header.getNode().querySelector("#playSoundButton").setAttribute("disabled","true"))}displaySentence(){this.currentSentenceCards.length=0,this.gameSourceDataBlock.getNode().innerHTML="",this.currentSentence=this.sentencesForRound[this.currentSentenceIndex];const e=ze(this.currentSentence,b.gameWrap,this.sentencesForRound.length,this.currentSentenceIndex,this.imageUrl,this.gameSourceDataBlock);this.setCardsWidth(e);const t=Re(e);t.forEach(a=>{a.classList.add(b.wordCard),t.forEach((o,c)=>{setTimeout(()=>{o.style.visibility="visible",o.style.opacity="1"},(c+1)*100)}),this.gameSourceDataBlock.getNode().append(a)}),this.addClickHandlersToWordCards(e),this.currentSentenceCards.push(...e),this.isBgImageHintEnabled?(this.header.getNode().querySelector("#bgImageHint").setAttribute("active-hint","true"),this.gameWrap.getNode().removeAttribute("bg-image-disabled"),Array.from(this.gameSourceDataBlock.getNode().children).forEach(a=>{a.removeAttribute("bg-image-disabled")})):(this.header.getNode().querySelector("#bgImageHint").removeAttribute("active-hint"),this.gameWrap.getNode().setAttribute("bg-image-disabled","true"),Array.from(this.gameSourceDataBlock.getNode().children).forEach(a=>{a.setAttribute("bg-image-disabled","true")}))}checkIsTranslateEnabled(){return k("userData","translateEnabled")===!0}checkIsPronounceEnabled(){return k("userData","pronounceEnabled")===!0}checkIsBgImageHintEnabled(){return k("userData","bgImageHintEnabled")===!0}displayTranslation(){var t;const e=(t=this.fetchedWordData)==null?void 0:t.rounds[this.currentRound].words[this.currentSentenceIndex].textExampleTranslate;this.translationWrap.setTextContent(`${e}`)}addClickHandlersToWordCards(e){qe(e,this.gameWrap,`${b.gameSourceDataBlock}`,`${b.sentenceLine}`,this.currentSentenceIndex,`${b.selected}`,this.currentSentence,this.gameButtonsBlock,this)}setCardsWidth(e){const t=this.sentencesForRound[this.currentSentenceIndex],a=this.gameSourceDataBlock,o=D(t,a);for(let c=0;c<e.length;c+=1)e[c].style.width=`${e[c].textContent.length*o}px`}autoCompleteSentence(){var d,N;const e=this.gameWrap.getNode().children[this.currentSentenceIndex],t=Array.from(this.gameSourceDataBlock.getNode().children),a=Array.from(e.children),o=this.currentSentenceCards,c=(d=this.gameButtonsBlock.getNode().lastChild)==null?void 0:d.lastChild,m=(N=this.gameButtonsBlock.getNode().lastChild)==null?void 0:N.firstChild,_=H(this.currentSentence,e);t.length?(t.forEach((p,f)=>{p.style.visibility="hidden",p.style.opacity="0",setTimeout(()=>{p.remove(),e.append(p),a.push(p),p.style.visibility="visible",p.style.opacity="1",o.forEach(y=>{a.forEach(h=>{h.getAttribute("data-index")===y.toString()&&(h.style.order=`${y}`,h.style.transition="order 5s",h.getAttribute("bg-image-disabled")&&h.removeAttribute("bg-image-disabled"))})})},(f+1)*100)}),this.displayTranslation()):_||o.forEach(p=>{a.forEach(f=>{f.classList.remove(`${b.wrongOrder}`),f.getAttribute("data-index")===p.toString()&&(f.style.order=`${p}`,f.style.transition="order 5s")})}),setTimeout(()=>{c.removeAttribute("disabled"),c.removeAttribute("invisible"),m.setAttribute("invisible","true")},1e3)}async getImageForRound(){try{const e=await ne(this.imageSource);this.gameWrap.getNode().style.backgroundImage=`url(${e.src})`,Array.from(this.gameSourceDataBlock.getNode().children).forEach(a=>{a.style.backgroundImage=`url(${e.src})`}),this.imageUrl=`url(${e.src})`}catch(e){console.error("Error fetching image:",e)}}}class F extends r{constructor(){super({tagName:"div",classNames:[w.startScreen]});i(this,"header");i(this,"footer");i(this,"mainContent");i(this,"appName");i(this,"gameDescription");i(this,"startButton");this.getNode().style.backgroundImage=`url(${T})`,this.getNode().style.backgroundSize="cover",this.getNode().style.backgroundRepeat="no-repeat",this.getNode().style.backgroundPosition="center",this.header=new $,this.append(this.header),this.mainContent=new r({tagName:"div",classNames:[w.mainContentWrapper]}),this.append(this.mainContent),this.appName=new r({tagName:"h1",text:"RSS English Puzzle Game",classNames:[w.appTitle]}),this.mainContent.append(this.appName),this.gameDescription=new r({tagName:"p",text:"Puzzle is an interactive mini-game aimed at enhancing English language skills. Players assemble sentences from jumbled words. The game integrates various levels of difficulty, hint options, and a unique puzzle-like experience with artwork.",classNames:[w.gameDescription]}),this.mainContent.append(this.gameDescription),this.startButton=new r({tagName:"button",text:"Start",classNames:[w.startBtn]}),this.mainContent.append(this.startButton),this.startButton.getNode().addEventListener("click",this.handleStartClick.bind(this)),this.footer=new P,this.append(this.footer)}handleStartClick(){localStorage.setItem("isPlaying","true"),document.body.firstChild&&document.body.removeChild(document.body.firstChild),document.body.prepend(new O().getNode())}}const Ke="_login-form-wrapper_c2e71_1",Ye="_login-form_c2e71_1",Qe="_login-form-title_c2e71_55",Xe="_login-form-input_c2e71_73",et="_surname-input_c2e71_99",tt="_login-form-label_c2e71_107",nt="_input-tooltip_c2e71_135",at="_input-tooltip-active_c2e71_191",st="_button_c2e71_201",l={"login-form-wrapper":"_login-form-wrapper_c2e71_1",loginFormWrapper:Ke,"login-form":"_login-form_c2e71_1",loginForm:Ye,"login-form-title":"_login-form-title_c2e71_55",loginFormTitle:Qe,"login-form-input":"_login-form-input_c2e71_73",loginFormInput:Xe,"surname-input":"_surname-input_c2e71_99",surnameInput:et,"login-form-label":"_login-form-label_c2e71_107",loginFormLabel:tt,"input-tooltip":"_input-tooltip_c2e71_135",inputTooltip:nt,"input-tooltip-active":"_input-tooltip-active_c2e71_191",inputTooltipActive:at,button:st};class j extends r{constructor(){super({tagName:"div",classNames:[l.loginFormWrapper]});i(this,"form");i(this,"firstNameInput");i(this,"surnameInput");i(this,"loginButton");i(this,"firstNameLabel");i(this,"surnameLabel");i(this,"firstNameTooltip");i(this,"surnameTooltip");i(this,"formTitle");this.form=new r({tagName:"form",classNames:[l.loginForm]}),this.append(this.form),this.formTitle=new r({tagName:"h2",classNames:[l.loginFormTitle],text:"login"}),this.surnameTooltip=new r({tagName:"span",classNames:[l.inputTooltip,l.inputTooltipSurname]}),this.firstNameTooltip=new r({tagName:"span",classNames:[l.inputTooltip,l.inputTooltipName]}),this.firstNameInput=new r({tagName:"input",classNames:[l.loginFormInput,l.firstNameInput],attributes:{type:"text",placeholder:"First Name",required:!0,name:"fname",id:"fname",minlength:"3"}}),this.surnameInput=new r({tagName:"input",classNames:[l.loginFormInput,l.surnameInput],attributes:{type:"text",placeholder:"Surname",required:!0,name:"sname",id:"sname",minlength:"4"}}),this.firstNameLabel=new r({tagName:"label",text:"First Name",classNames:[l.loginFormLabel,l.firstNameLabel],attributes:{for:"fname"}}),this.surnameLabel=new r({tagName:"label",text:"Last Name",classNames:[l.loginFormLabel,l.surnameLabel],attributes:{for:"sname"}}),this.loginButton=new r({tagName:"button",classNames:[l.button,l.loginBtn],text:"Login",attributes:{type:"submit",disabled:!0}}),this.form.prepend(this.formTitle),this.form.append(this.firstNameLabel),this.firstNameLabel.append(this.firstNameTooltip),this.form.append(this.firstNameInput),this.form.append(this.surnameLabel),this.surnameLabel.append(this.surnameTooltip),this.form.append(this.surnameInput),this.form.append(this.loginButton),this.firstNameInput.getNode().addEventListener("input",this.checkFormValidity.bind(this)),this.surnameInput.getNode().addEventListener("input",this.checkFormValidity.bind(this)),this.form.getNode().addEventListener("submit",e=>{e.preventDefault(),this.handleFormSubmit()})}checkValidity(e,t,a){if(e==="")return t.textContent="This field is required",t.classList.add(l.inputTooltipActive),!1;if(e.length<a)return t.textContent=`Minimum ${a} characters required`,t.classList.add(l.inputTooltipActive),!1;if(!/^[A-Za-z\-]+$/.test(e))return t.textContent='Only English letters and "-" allowed',t.classList.add(l.inputTooltipActive),!1;if(e[0]==="-"){if(e[1]!==e[1].toUpperCase())return t.textContent="First letter after hyphen should be uppercase",t.classList.add(l.inputTooltipActive),!1;if(e.slice(2)!==e.slice(2).toLowerCase())return t.textContent="ONLY FIRST letter may be uppercase",t.classList.add(l.inputTooltipActive),!1}else{if(e[0]!==e[0].toUpperCase())return t.textContent="First letter should be uppercase",t.classList.add(l.inputTooltipActive),!1;if(e.slice(1)!==e.slice(1).toLowerCase())return t.textContent="ONLY FIRST letter may be uppercase",t.classList.add(l.inputTooltipActive),!1}return t.classList.remove(l.inputTooltipActive),!0}checkFormValidity(){const e=this.firstNameInput.getNode().value.trim(),t=this.surnameInput.getNode().value.trim(),a=parseInt(this.firstNameInput.getNode().getAttribute("minlength")||"0"),o=parseInt(this.surnameInput.getNode().getAttribute("minlength")||"0"),c=this.checkValidity(e,this.firstNameTooltip.getNode(),a),m=this.checkValidity(t,this.surnameTooltip.getNode(),o);this.loginButton.getNode().disabled=!(c&&m)}handleFormSubmit(){const e=this.getFirstName(),t=this.getSurname();q(e,t,!0),this.destroy(),document.body.prepend(new F().getNode())}getFirstName(){return this.firstNameInput.getNode().value}getSurname(){return this.surnameInput.getNode().value}setFirstName(e){this.firstNameInput.getNode().value=e}setSurname(e){this.surnameInput.getNode().value=e}}document.addEventListener("DOMContentLoaded",()=>{const s=X(),n=localStorage.getItem("isPlaying"),e=n?JSON.parse(n):!1;s&&e?document.body.prepend(new O().getNode()):s?document.body.prepend(new F().getNode()):document.body.prepend(new j().getNode())});
