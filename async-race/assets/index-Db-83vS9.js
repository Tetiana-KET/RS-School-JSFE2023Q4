var T=Object.defineProperty;var E=(n,e,t)=>e in n?T(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var s=(n,e,t)=>(E(n,typeof e!="symbol"?e+"":e,t),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))a(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&a(o)}).observe(document,{childList:!0,subtree:!0});function t(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function a(r){if(r.ep)return;r.ep=!0;const i=t(r);fetch(r.href,i)}})();class c{constructor({tagName:e="div",text:t="",classNames:a=[],children:r=[],attributes:i={}}){s(this,"node");s(this,"children",[]);const o=document.createElement(e);a.length&&o.classList.add(...a),Object.keys(i).length&&Object.entries(i).forEach(([d,m])=>{typeof m=="boolean"?m?o.setAttribute(d,""):o.removeAttribute(d):o.setAttribute(d,m)}),o.textContent=t,this.node=o,r&&this.appendChildren(r)}appendChildren(e){e.forEach(t=>{this.append(t)})}append(e){e instanceof c&&(this.children.push(e),this.node.append(e.getNode()))}prepend(e){e instanceof c&&(this.children.push(e),this.node.prepend(e.getNode()))}getNode(){return this.node}getChildren(){return this.children}setTextContent(e){this.node.textContent=e}setAttribute(e,t){this.node.setAttribute(e,t)}removeAttribute(e){this.node.removeAttribute(e)}toggleClass(e){this.node.classList.toggle(e)}destroyChildren(){this.children.forEach(e=>{e.destroy()}),this.children.length=0}destroy(){this.destroyChildren(),this.node.remove()}}const A="_footer_fofyw_2",x="_footer-container_fofyw_14",q="_social-items_fofyw_23",M="_social-item_fofyw_23",R="_developer_fofyw_40",H="_social-item-link_fofyw_40",G="_rs-icon-wrap_fofyw_51",F="_rsschool-link_fofyw_59",l={footer:A,"footer-container":"_footer-container_fofyw_14",footerContainer:x,"social-items":"_social-items_fofyw_23",socialItems:q,"social-item":"_social-item_fofyw_23",socialItem:M,developer:R,"social-item-link":"_social-item-link_fofyw_40",socialItemLink:H,"rs-icon-wrap":"_rs-icon-wrap_fofyw_51",rsIconWrap:G,"rsschool-link":"_rsschool-link_fofyw_59",rsschoolLink:F};class V extends c{constructor(){super({tagName:"footer",classNames:[l.footer]}),this.render()}render(){this.node.innerHTML=`
    <div class="${l.footerContainer}">
      <ul class="${l.socialItems} ${l.developer}">
        <li class="${l.socialItem}">
          <a class="${l.socialItemLink}" href="https://github.com/Tetiana-KET" target="_blank">
            Tetiana
          </a>
        </li>
        <li class="${l.socialItem}">
          <a class="${l.socialItemLink}" href="https://github.com/Tetiana-KET" target="_blank">
            <svg viewBox="64 64 896 896" focusable="false" data-icon="github" width="1em" height="1em" fill="#ffffff" aria-hidden="true"><path d="M511.6 76.3C264.3 76.2 64 276.4 64 523.5 64 718.9 189.3 885 363.8 946c23.5 5.9 19.9-10.8 19.9-22.2v-77.5c-135.7 15.9-141.2-73.9-150.3-88.9C215 726 171.5 718 184.5 703c30.9-15.9 62.4 4 98.9 57.9 26.4 39.1 77.9 32.5 104 26 5.7-23.5 17.9-44.5 34.7-60.8-140.6-25.2-199.2-111-199.2-213 0-49.5 16.3-95 48.3-131.7-20.4-60.5 1.9-112.3 4.9-120 58.1-5.2 118.5 41.6 123.2 45.3 33-8.9 70.7-13.6 112.9-13.6 42.4 0 80.2 4.9 113.5 13.9 11.3-8.6 67.3-48.8 121.3-43.9 2.9 7.7 24.7 58.3 5.5 118 32.4 36.8 48.9 82.7 48.9 132.3 0 102.2-59 188.1-200 212.9a127.5 127.5 0 0138.1 91v112.5c.8 9 0 17.9 15 17.9 177.1-59.7 304.6-227 304.6-424.1 0-247.2-200.4-447.3-447.5-447.3z"></path></svg>
          </a>
        </li>
      </ul>
      <div class="${l.rsIconWrap} ${l.rsIconWrap}">
        <a href="https://rs.school/" class="${l.socialItem} ${l.rsschoolLink}" target="_blank">
        </a>
      </div>
      <ul class="${l.socialItems} ${l.rsSchool}">
        <li class="${l.socialItem}">
          <a class="${l.socialItemLink}" href="https://github.com/rolling-scopes/rsschool-app" target="_blank">
            <svg viewBox="64 64 896 896" focusable="false" data-icon="github" width="1em" height="1em" fill="#ffffff" aria-hidden="true"><path d="M511.6 76.3C264.3 76.2 64 276.4 64 523.5 64 718.9 189.3 885 363.8 946c23.5 5.9 19.9-10.8 19.9-22.2v-77.5c-135.7 15.9-141.2-73.9-150.3-88.9C215 726 171.5 718 184.5 703c30.9-15.9 62.4 4 98.9 57.9 26.4 39.1 77.9 32.5 104 26 5.7-23.5 17.9-44.5 34.7-60.8-140.6-25.2-199.2-111-199.2-213 0-49.5 16.3-95 48.3-131.7-20.4-60.5 1.9-112.3 4.9-120 58.1-5.2 118.5 41.6 123.2 45.3 33-8.9 70.7-13.6 112.9-13.6 42.4 0 80.2 4.9 113.5 13.9 11.3-8.6 67.3-48.8 121.3-43.9 2.9 7.7 24.7 58.3 5.5 118 32.4 36.8 48.9 82.7 48.9 132.3 0 102.2-59 188.1-200 212.9a127.5 127.5 0 0138.1 91v112.5c.8 9 0 17.9 15 17.9 177.1-59.7 304.6-227 304.6-424.1 0-247.2-200.4-447.3-447.5-447.3z"></path></svg>
          </a>
        </li>
        <li class="${l.socialItem}">
          <a class="${l.socialItemLink}" href="https://www.youtube.com/c/rollingscopesschool" target="_blank">
            <svg viewBox="64 64 896 896" focusable="false" data-icon="youtube" width="1em" height="1em" fill="#ffffff" aria-hidden="true"><path d="M941.3 296.1a112.3 112.3 0 00-79.2-79.3C792.2 198 512 198 512 198s-280.2 0-350.1 18.7A112.12 112.12 0 0082.7 296C64 366 64 512 64 512s0 146 18.7 215.9c10.3 38.6 40.7 69 79.2 79.3C231.8 826 512 826 512 826s280.2 0 350.1-18.8c38.6-10.3 68.9-40.7 79.2-79.3C960 658 960 512 960 512s0-146-18.7-215.9zM423 646V378l232 133-232 135z"></path></svg>
          </a>
        </li>
        <li class="${l.socialItem}">
          <a class="${l.socialItemLink}" href="https://discord.com/invite/PRADsJB" target="_blank">
            <svg width="1em" height="1em" fill="#ffffff" viewBox="0 -7 71 71" xmlns="http://www.w3.org/2000/svg"><g><path d="M60.1045 4.8978C55.5792 2.8214 50.7265 1.2916 45.6527 0.41542C45.5603 0.39851 45.468 0.440769 45.4204 0.525289C44.7963 1.6353 44.105 3.0834 43.6209 4.2216C38.1637 3.4046 32.7345 3.4046 27.3892 4.2216C26.905 3.0581 26.1886 1.6353 25.5617 0.525289C25.5141 0.443589 25.4218 0.40133 25.3294 0.41542C20.2584 1.2888 15.4057 2.8186 10.8776 4.8978C10.8384 4.9147 10.8048 4.9429 10.7825 4.9795C1.57795 18.7309 -0.943561 32.1443 0.293408 45.3914C0.299005 45.4562 0.335386 45.5182 0.385761 45.5576C6.45866 50.0174 12.3413 52.7249 18.1147 54.5195C18.2071 54.5477 18.305 54.5139 18.3638 54.4378C19.7295 52.5728 20.9469 50.6063 21.9907 48.5383C22.0523 48.4172 21.9935 48.2735 21.8676 48.2256C19.9366 47.4931 18.0979 46.6 16.3292 45.5858C16.1893 45.5041 16.1781 45.304 16.3068 45.2082C16.679 44.9293 17.0513 44.6391 17.4067 44.3461C17.471 44.2926 17.5606 44.2813 17.6362 44.3151C29.2558 49.6202 41.8354 49.6202 53.3179 44.3151C53.3935 44.2785 53.4831 44.2898 53.5502 44.3433C53.9057 44.6363 54.2779 44.9293 54.6529 45.2082C54.7816 45.304 54.7732 45.5041 54.6333 45.5858C52.8646 46.6197 51.0259 47.4931 49.0921 48.2228C48.9662 48.2707 48.9102 48.4172 48.9718 48.5383C50.038 50.6034 51.2554 52.5699 52.5959 54.435C52.6519 54.5139 52.7526 54.5477 52.845 54.5195C58.6464 52.7249 64.529 50.0174 70.6019 45.5576C70.6551 45.5182 70.6887 45.459 70.6943 45.3942C72.1747 30.0791 68.2147 16.7757 60.1968 4.9823C60.1772 4.9429 60.1437 4.9147 60.1045 4.8978ZM23.7259 37.3253C20.2276 37.3253 17.3451 34.1136 17.3451 30.1693C17.3451 26.225 20.1717 23.0133 23.7259 23.0133C27.308 23.0133 30.1626 26.2532 30.1066 30.1693C30.1066 34.1136 27.28 37.3253 23.7259 37.3253ZM47.3178 37.3253C43.8196 37.3253 40.9371 34.1136 40.9371 30.1693C40.9371 26.225 43.7636 23.0133 47.3178 23.0133C50.9 23.0133 53.7545 26.2532 53.6986 30.1693C53.6986 34.1136 50.9 37.3253 47.3178 37.3253Z"></path></g></svg>
          </a>
        </li>
      </ul>
    </div>`}}const j="_header-logo_pd7rp_1",D="_header_pd7rp_1",O="_header-container_pd7rp_16",X="_buttons-wrap_pd7rp_25",K="_button_pd7rp_25",z="_garage-button_pd7rp_45",U="_winners-button_pd7rp_47",_={"header-logo":"_header-logo_pd7rp_1",headerLogo:j,header:D,"header-container":"_header-container_pd7rp_16",headerContainer:O,"buttons-wrap":"_buttons-wrap_pd7rp_25",buttonsWrap:X,button:K,"garage-button":"_garage-button_pd7rp_45",garageButton:z,"winners-button":"_winners-button_pd7rp_47",winnersButton:U};class Z extends c{constructor(){super({tagName:"header",classNames:[_.header]});s(this,"headerContainer");s(this,"headerLogo");s(this,"buttonsWrap");s(this,"garageButton");s(this,"winnersButton");this.headerContainer=new c({tagName:"div",classNames:[_.headerContainer]}),this.append(this.headerContainer),this.headerLogo=new c({tagName:"h2",text:"Async Rase",classNames:[_.headerLogo]}),this.headerContainer.append(this.headerLogo),this.buttonsWrap=new c({tagName:"div",classNames:[_.buttonsWrap]}),this.headerContainer.append(this.buttonsWrap),this.garageButton=new c({tagName:"button",classNames:[_.button,_.garageButton],text:"Garage",attributes:{type:"button",id:"toGarageBtn",disabled:"true"}}),this.buttonsWrap.append(this.garageButton),this.winnersButton=new c({tagName:"button",classNames:[_.button,_.winnersButton],text:"Winners",attributes:{type:"button",id:"toWinnersBtn"}}),this.buttonsWrap.append(this.winnersButton)}}const J="_garage_1n6tq_1",Q="_settings_1n6tq_8",Y="_garage-menu_1n6tq_15",tt="_form-wrapper_1n6tq_18",et="_form_1n6tq_18",at="_car-form_1n6tq_27",nt="_button_1n6tq_33",rt="_form-name-input_1n6tq_38",st="_create-btn_1n6tq_56",it="_update-btn_1n6tq_58",ot="_race-btn_1n6tq_61",ct="_reset-btn_1n6tq_63",lt="_generate-btn_1n6tq_65",dt="_btn-disabled_1n6tq_67",gt="_garage-menu-buttons_1n6tq_74",ht="_title-wrapper_1n6tq_81",ut="_garage-title_1n6tq_89",pt="_cars-count_1n6tq_92",mt="_page-number_1n6tq_96",_t="_garage-page-number_1n6tq_98",bt="_garage-race-container_1n6tq_101",u={garage:J,settings:Q,"garage-menu":"_garage-menu_1n6tq_15",garageMenu:Y,"form-wrapper":"_form-wrapper_1n6tq_18",formWrapper:tt,form:et,"car-form":"_car-form_1n6tq_27",carForm:at,button:nt,"form-name-input":"_form-name-input_1n6tq_38",formNameInput:rt,"create-btn":"_create-btn_1n6tq_56",createBtn:st,"update-btn":"_update-btn_1n6tq_58",updateBtn:it,"race-btn":"_race-btn_1n6tq_61",raceBtn:ot,"reset-btn":"_reset-btn_1n6tq_63",resetBtn:ct,"generate-btn":"_generate-btn_1n6tq_65",generateBtn:lt,"btn-disabled":"_btn-disabled_1n6tq_67",btnDisabled:dt,"garage-menu-buttons":"_garage-menu-buttons_1n6tq_74",garageMenuButtons:gt,"title-wrapper":"_title-wrapper_1n6tq_81",titleWrapper:ht,"garage-title":"_garage-title_1n6tq_89",garageTitle:ut,"cars-count":"_cars-count_1n6tq_92",carsCount:pt,"page-number":"_page-number_1n6tq_96",pageNumber:mt,"garage-page-number":"_garage-page-number_1n6tq_98",garagePageNumber:_t,"garage-race-container":"_garage-race-container_1n6tq_101",garageRaceContainer:bt},wt="_pagination_181s8_1",Ct="_pagination-wrapper_181s8_7",ft="_pagination-btn_181s8_13",Nt="_prev-btn_181s8_29",vt="_next-btn_181s8_31",Pt="_page-num_181s8_33",Bt="_first-page-btn_181s8_41",yt="_last-page-btn_181s8_43",h={pagination:wt,"pagination-wrapper":"_pagination-wrapper_181s8_7",paginationWrapper:Ct,"pagination-btn":"_pagination-btn_181s8_13",paginationBtn:ft,"prev-btn":"_prev-btn_181s8_29",prevBtn:Nt,"next-btn":"_next-btn_181s8_31",nextBtn:vt,"page-num":"_page-num_181s8_33",pageNum:Pt,"first-page-btn":"_first-page-btn_181s8_41",firstPageBtn:Bt,"last-page-btn":"_last-page-btn_181s8_43",lastPageBtn:yt};class k extends c{constructor(t){super({tagName:"div",classNames:[h.pagination]});s(this,"handlers");s(this,"paginationWrapper");s(this,"pageNum");s(this,"firstPageBtn");s(this,"prevBtn");s(this,"nextBtn");s(this,"lastPageBtn");this.handlers=t,this.pageNum=new c({tagName:"div",classNames:[h.paginationBtn,h.pageNum],attributes:{id:`${t.pageName}PageNum`}}),this.firstPageBtn=new c({tagName:"button",text:"<<",classNames:[h.paginationBtn,h.firstPageBtn],attributes:{disabled:"true",id:`${t.pageName}FirstPageBtn`}}),this.prevBtn=new c({tagName:"button",text:"<",classNames:[h.paginationBtn,h.prevBtn],attributes:{disabled:"true",id:`${t.pageName}PrevBtn`}}),this.nextBtn=new c({tagName:"button",text:">",classNames:[h.paginationBtn,h.nextBtn],attributes:{id:`${t.pageName}NextBtn`}}),this.lastPageBtn=new c({tagName:"button",text:">>",classNames:[h.paginationBtn,h.lastPageBtn],attributes:{id:`${t.pageName}LastPageBtn`}}),this.paginationWrapper=new c({tagName:"div",classNames:[h.paginationWrapper],children:[this.firstPageBtn,this.prevBtn,this.pageNum,this.nextBtn,this.lastPageBtn]}),this.append(this.paginationWrapper),this.addEventListenersToButtons()}addEventListenersToButtons(){this.firstPageBtn.getNode().addEventListener("click",this.clickFirstPageButtonHandler.bind(this)),this.prevBtn.getNode().addEventListener("click",this.clickPrevPageButtonHandler.bind(this)),this.nextBtn.getNode().addEventListener("click",this.clickNextPageButtonHandler.bind(this)),this.lastPageBtn.getNode().addEventListener("click",this.clickLastPageButtonHandler.bind(this))}clickFirstPageButtonHandler(){this.handlers.onFirstClick()}clickPrevPageButtonHandler(){this.handlers.onPrevClick()}clickNextPageButtonHandler(){this.handlers.onNextClick()}clickLastPageButtonHandler(){this.handlers.onLastClick()}}const kt="_car-track-wrap_vb8ve_1",$t="_car-track-controls_vb8ve_7",St="_button_vb8ve_14",Wt="_start-btn_vb8ve_24",Lt="_stop-btn_vb8ve_26",It="_select-btn_vb8ve_28",Tt="_delete-btn_vb8ve_30",Et="_car-name_vb8ve_32",At="_car-track_vb8ve_1",xt="_car-icon-wrap_vb8ve_54",qt="_car-svg_vb8ve_58",g={"car-track-wrap":"_car-track-wrap_vb8ve_1",carTrackWrap:kt,"car-track-controls":"_car-track-controls_vb8ve_7",carTrackControls:$t,button:St,"start-btn":"_start-btn_vb8ve_24",startBtn:Wt,"stop-btn":"_stop-btn_vb8ve_26",stopBtn:Lt,"select-btn":"_select-btn_vb8ve_28",selectBtn:It,"delete-btn":"_delete-btn_vb8ve_30",deleteBtn:Tt,"car-name":"_car-name_vb8ve_32",carName:Et,"car-track":"_car-track_vb8ve_1",carTrack:At,"car-icon-wrap":"_car-icon-wrap_vb8ve_54",carIconWrap:xt,"car-svg":"_car-svg_vb8ve_58",carSvg:qt},w="http://localhost:3000",C={garage:"/garage",engine:"/engine",winners:"/winners"},Mt=async(n,e)=>{const t=await fetch(`${w}${C.garage}?_page=${n}&_limit=${e}`),a=await t.json(),r=Number(t.headers.get("X-Total-Count"));return[a,r]},B=async n=>{try{if(!(await fetch(`${w}${C.garage}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)})).ok)throw new Error("Failed to update server state")}catch(e){console.error("Error updating server state:",e)}},Rt=async n=>{const e=n;try{const t=await fetch(`${w}${C.garage}/${e}`,{method:"DELETE"});t.ok||console.error("Failed to delete car. Status:",t.status)}catch(t){console.error("Error updating server state:",t)}},Ht=async n=>{const{id:e}=n;try{if(!(await fetch(`${w}${C.garage}/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)})).ok)throw new Error("Failed to update server state")}catch(t){console.error("Error updating server state:",t)}},Gt=async(n,e)=>{try{const t=await fetch(`${w}${C.winners}?_page=${n}&_limit=${e}`),a=Number(t.headers.get("X-Total-Count"))||0;return[await t.json(),a]}catch(t){throw console.log("getWinnersByPage error",t),t}},Ft=async n=>{const e=n;return await(await fetch(`${w}${C.garage}/${e}`)).json()},Vt=async n=>{const e=n;try{const t=await fetch(`${w}${C.winners}/${e}`,{method:"DELETE"});t.ok||console.error("Failed to delete car. Status:",t.status)}catch(t){console.error("Error updating server state:",t)}};function jt(){const n=document.querySelector("#toGarageBtn"),e=document.querySelector("#toWinnersBtn"),t=document.querySelector("#winnersSection"),a=document.querySelector("#garageSection");n.addEventListener("click",()=>{window.location.hash="garage",a.style.display="flex",t.style.display="none",n.setAttribute("disabled","true"),e.removeAttribute("disabled")}),e.addEventListener("click",()=>{window.location.hash="winners",t.style.display="flex",a.style.display="none",e.setAttribute("disabled","true"),n.removeAttribute("disabled")})}function $(n,e,t,a=1){const r=document.querySelector(`#${t}CarsCount h2`),i=t==="garage"?"Cars in Garage:":"Total Winners:";r&&(r.innerHTML=`<h2>${i} ( ${n} )</h2>`);const o=document.querySelector(`#${t}pageNumber`);o&&(o.textContent=`Page: ( № ${e} / ${a})`)}async function Dt(n,e){const[t,a]=await Mt(n,e);return[await t,a]}async function Ot(n,e){const[t,a]=await Gt(n,e);return[await t,a]}function b(n,e,t){const a=document.querySelector(`#${t}FirstPageBtn`),r=document.querySelector(`#${t}PrevBtn`),i=document.querySelector(`#${t}NextBtn`),o=document.querySelector(`#${t}LastPageBtn`);n>1?(a.removeAttribute("disabled"),r.removeAttribute("disabled")):(a.setAttribute("disabled","true"),r.setAttribute("disabled","true")),n<e?(o.removeAttribute("disabled"),i.removeAttribute("disabled")):(o.setAttribute("disabled","true"),i.setAttribute("disabled","true"))}function S(n,e,t){const a=document.createElementNS("http://www.w3.org/2000/svg","svg"),r=document.createElementNS("http://www.w3.org/2000/svg","use");return r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",`./sprite.svg#car${e%7+1}`),a.classList.add(n.carSvg),a.style.fill=t,a.append(r),a}class Xt{constructor(e){s(this,"id");s(this,"name");s(this,"color");s(this,"element");s(this,"handlers");this.id=e.id,this.name=e.name,this.color=e.color,this.element=this.createCarElement(),this.handlers=e}createCarElement(){const e=new c({tagName:"button",text:"Start",classNames:[g.startBtn,g.button]}),t=new c({tagName:"button",text:"Stop",classNames:[g.stopBtn,g.button],attributes:{disabled:"true"}}),a=new c({tagName:"button",text:"Select",classNames:[g.selectBtn,g.button]}),r=new c({tagName:"button",text:"Delete",classNames:[g.deleteBtn,g.button]}),i=new c({tagName:"span",text:`${this.name}`,classNames:[g.carName],attributes:{"data-id":`${this.id}`}}),o=new c({tagName:"div",classNames:[g.carTrackControls],children:[e,t,a,r,i]});this.clickHandler(e,t,a,r);const d=S(g,this.id,this.color),m=new c({tagName:"div",classNames:[g.carIconWrap]});m.getNode().appendChild(d);const f=new c({tagName:"div",classNames:[g.carTrack],children:[m]});return new c({tagName:"div",classNames:[g.carTrackWrap],children:[f,o],attributes:{id:`${this.id}`}})}clickHandler(e,t,a,r){e.getNode().addEventListener("click",this.clickStartButtonHandler.bind(this)),t.getNode().addEventListener("click",this.clickStopButtonHandler.bind(this)),a.getNode().addEventListener("click",this.clickSelectButtonHandler.bind(this)),r.getNode().addEventListener("click",this.clickDeleteButtonHandler.bind(this))}clickSelectButtonHandler(){const{color:e}=this,{name:t}=this,{id:a}=this,r=document.querySelector("#update-car-name"),i=document.querySelector("#update-car-color"),o=document.querySelector("#updateBtn");o.disabled=!1,r.value=t,i.value=e,r.setAttribute("car-id",`${a}`)}clickDeleteButtonHandler(){this.handlers.onDeleteClick({id:this.id})}clickStartButtonHandler(){console.log("start",this),this.handlers.onStartClick({id:this.id})}clickStopButtonHandler(){console.log("stop",this),this.handlers.onStopClick({id:this.id})}getElement(){return this.element.getNode()}}const Kt=["Acura","Alfa Romeo","Alpine","Apollo","Apple","Aston Martin","Audi","Automobili Pininfarina","Bentley","BMW","Bollinger","Bosch","Brilliance","Bugatti","Buick","BYD","Cadillac","Chana","Changan","Chery","Chevrolet","Chrysler","Citroen","Continental","CUPRA","Dacia","Daewoo","Daihatsu","Datsun","Delfast","Ferrari","Fiat","Fisker","Ford","Foxtron","Geely","Genesis","GMC","Hummer","Hyundai","Ineos","Infiniti","KIA","Koenigsegg","Lada","Lamborghini","Lancia","Land Rover","Lexus","Lifan","Nissan","Opel","Pagani","Peugeot","Polestar","Porsche","Qoros","Range Rover","Ravon","Renault","Skoda","Toyota","VinFast","Volkswagen","Volvo","WOG","Xiaomi","Xpeng","Yamaha","Zotye","ЗАЗ","КрАЗ"],zt=["Q1","A5","Model S","Model L","Model XL","Model M","Q5","V8","GLC","Sedan","X7 (G07) 2018","X5 (G05) 2018","M5 Sedan (F90) 2017"];function y(n){return Math.floor(Math.random()*n)}class Ut{constructor(){s(this,"makes");s(this,"models");this.makes=Kt,this.models=zt}getRandomColor(){const e=Math.floor(Math.random()*256),t=Math.floor(Math.random()*256),a=Math.floor(Math.random()*256),r=e.toString(16).padStart(2,"0"),i=t.toString(16).padStart(2,"0"),o=a.toString(16).padStart(2,"0");return`#${r}${i}${o}`}generateRandomName(){const e=y(this.makes.length),t=y(this.models.length);return`${this.makes[e]} ${this.models[t]}`}generateRandomCar(){return{name:this.generateRandomName(),color:this.getRandomColor()}}}function Zt(n){return`
      <div class="${n.formWrapper}">
        <div class="${n.form}">
          <form action="" class="${n.carForm}" id="create-car">
            <input class="${n.formNameInput}" type="text" id="create-car-name" name="car-name" minlength="3" placeholder="Car name (min 3 symbols)"><br>
            <input type="color" id="create-car-color" name="car-color" value="#ffffff">
            <button type="button" class="${n.createBtn} ${n.button}" id="createBtn" disabled>Create</button>
          </form>
        </div>
        <div class="${n.form}">
          <form action="" class="${n.carForm}" id="update-car">
            <input class="${n.formNameInput}" type="text" id="update-car-name" name="car-name" minlength="3" placeholder="Select car with select button"><br>
            <input type="color" id="update-car-color" name="car-color" value="#ffffff">
            <button type="button" class="${n.updateBtn} ${n.button}" disabled id="updateBtn">Update</button>
          </form>
        </div>
      </div>
      <div class="${n.garageMenuButtons}">
        <button class="${n.raceBtn} ${n.button}">Start Race</button>
        <button class="${n.resetBtn} ${n.button}" disabled>Reset</button>
        <button class="${n.generateBtn} ${n.button}">Generate cars</button>
      </div>`}function W(n,e,t){return`
        <div class="${e.carsCount}" id="${t}CarsCount">
          <h2>Total Winners: 1 </h2>
        </div>
        <div class="${e.garagePageNumber}">
          <h3 class="${e.pageNumber}" data-page="${n}" id="${t}pageNumber">Page: ( № ${n} )</h3>
        </div>
    `}class Jt{constructor(){s(this,"listeners",{})}subscribe(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)}emit(e,t){const a=this.listeners[e];a&&a.forEach(r=>r(t))}}const L=new Jt;class Qt extends c{constructor(){super({tagName:"section",classNames:[u.garage],attributes:{id:"garageSection"}});s(this,"formWrap");s(this,"titleWrap");s(this,"garageRaceContainer");s(this,"CARS_LIMIT",7);s(this,"currentPage",1);s(this,"lastPage",1);s(this,"paginationWrap");s(this,"CarModelGenerator",new Ut);s(this,"onDeleteCar",async t=>{await Rt(t.id),L.emit("carDeleted",{carId:t.id}),await Vt(t.id),await this.createGarageView(this.garageRaceContainer.getNode(),this.currentPage,this.CARS_LIMIT)});s(this,"onStartCar",async t=>{console.log(`car with id="${t.id}" Started`)});s(this,"onStopCar",async t=>{console.log(`car with id="${t.id}" Stopped`)});s(this,"onFirstClick",async()=>{this.currentPage=1,await this.createGarageView(this.garageRaceContainer.getNode(),this.currentPage,this.CARS_LIMIT),this.setPaginationPageNum(),b(this.currentPage,this.lastPage,"garage")});s(this,"onPrevClick",async()=>{this.currentPage-=1,await this.createGarageView(this.garageRaceContainer.getNode(),this.currentPage,this.CARS_LIMIT),this.setPaginationPageNum(),b(this.currentPage,this.lastPage,"garage")});s(this,"onNextClick",async()=>{this.currentPage+=1,await this.createGarageView(this.garageRaceContainer.getNode(),this.currentPage,this.CARS_LIMIT),this.setPaginationPageNum(),b(this.currentPage,this.lastPage,"garage")});s(this,"onLastClick",async()=>{this.currentPage=this.lastPage,await this.createGarageView(this.garageRaceContainer.getNode(),this.currentPage,this.CARS_LIMIT),this.setPaginationPageNum(),b(this.currentPage,this.lastPage,"garage")});s(this,"createBtnClickHandler",async()=>{const t=this.children[0].getNode().querySelector("#create-car-name"),a=t.value,r=this.children[0].getNode().querySelector("#create-car-color"),i=r.value;try{await B({name:a,color:i})}catch{throw new Error}this.createGarageView(this.garageRaceContainer.getNode(),this.currentPage,this.CARS_LIMIT),t.value="",r.value="#ffffff";const o=this.children[0].getNode().querySelector(`.${u.createBtn}`);o.disabled=!0});this.titleWrap=new c({tagName:"div",classNames:[u.titleWrapper]}),this.garageRaceContainer=new c({tagName:"div",classNames:[u.garageRaceContainer]}),this.formWrap=new c({tagName:"div",classNames:[u.settings]}),this.formWrap.getNode().innerHTML=this.createFormWrapper(),this.titleWrap.getNode().innerHTML=this.createGarageTitle(this.currentPage),this.paginationWrap=new k({onFirstClick:this.onFirstClick,onPrevClick:this.onPrevClick,onNextClick:this.onNextClick,onLastClick:this.onLastClick,pageName:"garage"}),this.appendElements(this.formWrap,this.titleWrap,this.garageRaceContainer,this.paginationWrap),this.createGarageView(this.garageRaceContainer.getNode(),this.currentPage,this.CARS_LIMIT),this.generateBtnAddListener(),this.setPaginationPageNum(),this.togglePagination()}setPaginationPageNum(){const t=this.paginationWrap.getNode().querySelector("#garagePageNum");t.textContent=this.currentPage.toString()}createBtnAddListener(){const t=this.formWrap.getNode().querySelector("#create-car-name");t==null||t.addEventListener("input",this.createCarNameInputHandler.bind(this));const a=this.formWrap.getNode().querySelector(`.${u.createBtn}`);a==null||a.addEventListener("click",this.createBtnClickHandler)}updateBtnAddListener(){var t;(t=this.formWrap.getNode().querySelector(`.${u.updateBtn}`))==null||t.addEventListener("click",this.updateBtnClickHandler.bind(this))}generateBtnAddListener(){const t=this.formWrap.getNode().querySelector(`.${u.generateBtn}`);t==null||t.addEventListener("click",this.generateBtnClickHandler.bind(this))}appendElements(t,a,r,i){this.append(t),this.append(a),this.append(r),this.append(i)}async createGarageView(t,a,r){const[i,o]=await Dt(a,r);this.createBtnAddListener(),this.updateBtnAddListener();const d=t;d.innerHTML="",i.forEach(m=>{const P=new Xt({...m,onDeleteClick:this.onDeleteCar,onStartClick:this.onStartCar,onStopClick:this.onStopCar}).getElement();d==null||d.append(P)}),this.lastPage=this.updateLastPage(o),$(o,a,"garage",this.lastPage),this.togglePagination()}updateLastPage(t){return Math.ceil(t/this.CARS_LIMIT)}togglePagination(){const t=this.paginationWrap.getNode().querySelector("#garageNextBtn"),a=this.paginationWrap.getNode().querySelector("#garageLastPageBtn");this.lastPage===1?(t.setAttribute("disabled","true"),a.setAttribute("disabled","true")):this.lastPage>1&&(t.removeAttribute("disabled"),a.removeAttribute("disabled"))}createCarNameInputHandler(){const t=this.children[0].getNode().querySelector(`.${u.createBtn}`),a=this.children[0].getNode().querySelector("#create-car-name");t.disabled=a.value.length<3}async updateBtnClickHandler(){const t=this.children[0].getNode().querySelector("#update-car-name"),a=t.value,r=this.children[0].getNode().querySelector("#update-car-color"),i=r.value,o=Number(t.getAttribute("car-id"));try{await Ht({id:o,name:a,color:i})}catch{throw new Error}this.createGarageView(this.garageRaceContainer.getNode(),this.currentPage,this.CARS_LIMIT),t.value="",r.value="#ffffff";const d=document.querySelector("#updateBtn");d.disabled=!0}generateBtnClickHandler(){this.hundredCarGeneration(),this.createGarageView(this.garageRaceContainer.getNode(),this.currentPage,this.CARS_LIMIT)}async hundredCarGeneration(){const a=[...Array(100)].map(()=>this.CarModelGenerator.generateRandomCar()).map(r=>B(r));await Promise.all(a)}createFormWrapper(){return Zt(u)}createGarageTitle(t){return W(t,u,"garage")}}const Yt="_winners_167w2_1",te="_title-wrapper_167w2_11",ee="_winners-table-container_167w2_20",v={winners:Yt,"title-wrapper":"_title-wrapper_167w2_11",titleWrapper:te,"winners-table-container":"_winners-table-container_167w2_20",winnersTableContainer:ee},ae="_score-table_5jy3k_1",ne="_score-title_5jy3k_8",re="_score-headers_5jy3k_25",se="_score-headers-items_5jy3k_33",ie="_score-headers-position_5jy3k_35",oe="_score-table-body_5jy3k_37",ce="_score-row_5jy3k_41",le="_car-img_5jy3k_43",de="_car-name_5jy3k_46",ge="_wins-count_5jy3k_50",he="_timeValue_5jy3k_54",ue="_car-svg_5jy3k_64",p={"score-table":"_score-table_5jy3k_1",scoreTable:ae,"score-title":"_score-title_5jy3k_8",scoreTitle:ne,"score-headers":"_score-headers_5jy3k_25",scoreHeaders:re,"score-headers-items":"_score-headers-items_5jy3k_33",scoreHeadersItems:se,"score-headers-position":"_score-headers-position_5jy3k_35",scoreHeadersPosition:ie,"score-table-body":"_score-table-body_5jy3k_37",scoreTableBody:oe,"score-row":"_score-row_5jy3k_41",scoreRow:ce,"car-img":"_car-img_5jy3k_43",carImg:le,"car-name":"_car-name_5jy3k_46",carName:de,"wins-count":"_wins-count_5jy3k_50",winsCount:ge,timeValue:he,"car-svg":"_car-svg_5jy3k_64",carSvg:ue};function N(){return`
  <table class="${p.scoreTable}">
    <thead class="${p.scoreHeaders}">
      <tr class="${p.scoreHeadersItems}">
        <th class="${p.scoreHeadersPosition} scope="col" id="colNum">№.</th>
        <th class="${p.carImg} scope="col" id="carImg">Car</th>
        <th class="${p.carName} scope="col" id="carName">Car Name</th>
        <th class="${p.winsCount} scope="col" id="winsCount">Wins</th>
        <th class="${p.timeValue} scope="col" id="timeValue">Best Time, s</th>
      </tr>
    </thead>
    <tbody class="${p.scoreTableBody}">
      
    </tbody>
    <tfoot class="${p.scoreFooter}">
    </tfoot>
  </table>
  `}class pe{constructor(e,t,a){s(this,"rowNum");s(this,"id");s(this,"wins");s(this,"time");s(this,"color","");s(this,"carName","");s(this,"element");this.rowNum=a,this.id=e.id,this.wins=e.wins,this.time=e.time,this.color=t.color,this.carName=t.name,this.element=this.createWinnerLineComponent()}createWinnerLineComponent(){const e=new c({tagName:"tr"}),t=S(p,this.id,this.color),a=document.createElement("th");a.setAttribute("scope","row"),a.textContent=this.rowNum.toString();const r=document.createElement("td");r.textContent=this.carName;const i=document.createElement("td");i.textContent=this.wins.toString();const o=document.createElement("td");o.textContent=this.time.toString();const d=document.createElement("td");return d.appendChild(t),e.getNode().appendChild(a),e.getNode().appendChild(d),e.getNode().appendChild(r),e.getNode().appendChild(i),e.getNode().appendChild(o),e}getElement(){return this.element.getNode()}}class me extends c{constructor(){super({tagName:"section",classNames:[v.winners],attributes:{id:"winnersSection"}});s(this,"titleWrap");s(this,"winnersTableContainer");s(this,"rowNum",1);s(this,"WINNES_PER_PAGE",10);s(this,"currentPage",1);s(this,"lastPage",1);s(this,"paginationWrap");s(this,"onFirstClick",async()=>{this.currentPage=1,this.winnersTableContainer.destroyChildren(),this.winnersTableContainer.getNode().innerHTML=N(),await this.createWinnerView(this.currentPage,this.WINNES_PER_PAGE),this.setPaginationPageNum(),b(this.currentPage,this.lastPage,"winner")});s(this,"onPrevClick",async()=>{this.currentPage-=1,this.winnersTableContainer.destroyChildren(),this.winnersTableContainer.getNode().innerHTML=N(),await this.createWinnerView(this.currentPage,this.WINNES_PER_PAGE),this.setPaginationPageNum(),b(this.currentPage,this.lastPage,"winner")});s(this,"onNextClick",async()=>{this.currentPage+=1,this.winnersTableContainer.destroyChildren(),this.winnersTableContainer.getNode().innerHTML=N(),await this.createWinnerView(this.currentPage,this.WINNES_PER_PAGE),this.setPaginationPageNum(),b(this.currentPage,this.lastPage,"winner")});s(this,"onLastClick",async()=>{this.currentPage=this.lastPage,this.winnersTableContainer.destroyChildren(),this.winnersTableContainer.getNode().innerHTML=N(),await this.createWinnerView(this.currentPage,this.WINNES_PER_PAGE),this.setPaginationPageNum(),b(this.currentPage,this.lastPage,"winner")});this.titleWrap=new c({tagName:"div",classNames:[v.titleWrapper]}),this.titleWrap.getNode().innerHTML=this.createWinnersTitle(this.currentPage),this.winnersTableContainer=new c({tagName:"div",classNames:[v.winnersTableContainer]}),this.paginationWrap=new k({onFirstClick:this.onFirstClick,onPrevClick:this.onPrevClick,onNextClick:this.onNextClick,onLastClick:this.onLastClick,pageName:"winner"}),this.appendElements(this.titleWrap,this.winnersTableContainer,this.paginationWrap),this.createWinnerView(this.currentPage,this.WINNES_PER_PAGE),this.setPaginationPageNum(),this.togglePagination(),L.subscribe("carDeleted",async()=>{this.rowNum=1,this.winnersTableContainer.destroyChildren(),this.winnersTableContainer.getNode().innerHTML=N(),await this.createWinnerView(this.currentPage,this.WINNES_PER_PAGE),this.setPaginationPageNum()})}appendElements(t,a,r){const i=a;i.getNode().innerHTML=N(),this.append(t),this.append(a),this.append(r)}createWinnersTitle(t){return W(t,v,"winners")}togglePagination(){const t=this.paginationWrap.getNode().querySelector("#winnerNextBtn"),a=this.paginationWrap.getNode().querySelector("#winnerLastPageBtn");this.lastPage===1?(t.setAttribute("disabled","true"),a.setAttribute("disabled","true")):this.lastPage>1&&(t.removeAttribute("disabled"),a.removeAttribute("disabled"))}updateLastPage(t){return Math.ceil(t/this.WINNES_PER_PAGE)}async createWinnerView(t,a){const[r,i]=await Ot(t,a),o=this.winnersTableContainer.getNode().querySelector("tbody");t===1?this.rowNum=1:this.rowNum=+`${t-1}1`;for(const d of r){const{id:m}=d;try{const f=await Ft(m),I=new pe(d,f,this.rowNum).getElement();o==null||o.append(I)}catch(f){console.error("Error fetching winner car:",f)}this.rowNum+=1}this.lastPage=this.updateLastPage(i),$(i,t,"winners",this.lastPage),this.togglePagination()}setPaginationPageNum(){const t=this.paginationWrap.getNode().querySelector("#winnerPageNum");t.textContent=this.currentPage.toString()}}class _e extends c{constructor(){const e=new Qt,t=new me,a=new Z,r=new c({tagName:"main",classNames:["main"],children:[e,t]}),i=new V;super({tagName:"div",classNames:["site-wrapper"],children:[a,r,i]})}}const be=()=>new _e;class we{constructor(e,t){s(this,"siteWrapper");s(this,"root");this.siteWrapper=e,this.root=t}start(){this.root.append(this.siteWrapper.getNode()),jt()}}const Ce=new we(be(),document.body);Ce.start();
