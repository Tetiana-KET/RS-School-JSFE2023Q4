var q=Object.defineProperty;var x=(a,e,t)=>e in a?q(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t;var s=(a,e,t)=>(x(a,typeof e!="symbol"?e+"":e,t),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function t(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(r){if(r.ep)return;r.ep=!0;const o=t(r);fetch(r.href,o)}})();class c{constructor({tagName:e="div",text:t="",classNames:n=[],children:r=[],attributes:o={}}){s(this,"node");s(this,"children",[]);const i=document.createElement(e);n.length&&i.classList.add(...n),Object.keys(o).length&&Object.entries(o).forEach(([l,g])=>{typeof g=="boolean"?g?i.setAttribute(l,""):i.removeAttribute(l):i.setAttribute(l,g)}),i.textContent=t,this.node=i,r&&this.appendChildren(r)}appendChildren(e){e.forEach(t=>{this.append(t)})}append(e){e instanceof c&&(this.children.push(e),this.node.append(e.getNode()))}prepend(e){e instanceof c&&(this.children.push(e),this.node.prepend(e.getNode()))}getNode(){return this.node}getChildren(){return this.children}setTextContent(e){this.node.textContent=e}setAttribute(e,t){this.node.setAttribute(e,t)}removeAttribute(e){this.node.removeAttribute(e)}toggleClass(e){this.node.classList.toggle(e)}destroyChildren(){this.children.forEach(e=>{e.destroy()}),this.children.length=0}destroy(){this.destroyChildren(),this.node.remove()}}const M="_footer_fofyw_2",R="_footer-container_fofyw_14",H="_social-items_fofyw_23",G="_social-item_fofyw_23",F="_developer_fofyw_40",j="_social-item-link_fofyw_40",V="_rs-icon-wrap_fofyw_51",D="_rsschool-link_fofyw_59",d={footer:M,"footer-container":"_footer-container_fofyw_14",footerContainer:R,"social-items":"_social-items_fofyw_23",socialItems:H,"social-item":"_social-item_fofyw_23",socialItem:G,developer:F,"social-item-link":"_social-item-link_fofyw_40",socialItemLink:j,"rs-icon-wrap":"_rs-icon-wrap_fofyw_51",rsIconWrap:V,"rsschool-link":"_rsschool-link_fofyw_59",rsschoolLink:D};class O extends c{constructor(){super({tagName:"footer",classNames:[d.footer]}),this.render()}render(){this.node.innerHTML=`
    <div class="${d.footerContainer}">
      <ul class="${d.socialItems} ${d.developer}">
        <li class="${d.socialItem}">
          <a class="${d.socialItemLink}" href="https://github.com/Tetiana-KET" target="_blank">
            Tetiana
          </a>
        </li>
        <li class="${d.socialItem}">
          <a class="${d.socialItemLink}" href="https://github.com/Tetiana-KET" target="_blank">
            <svg viewBox="64 64 896 896" focusable="false" data-icon="github" width="1em" height="1em" fill="#ffffff" aria-hidden="true"><path d="M511.6 76.3C264.3 76.2 64 276.4 64 523.5 64 718.9 189.3 885 363.8 946c23.5 5.9 19.9-10.8 19.9-22.2v-77.5c-135.7 15.9-141.2-73.9-150.3-88.9C215 726 171.5 718 184.5 703c30.9-15.9 62.4 4 98.9 57.9 26.4 39.1 77.9 32.5 104 26 5.7-23.5 17.9-44.5 34.7-60.8-140.6-25.2-199.2-111-199.2-213 0-49.5 16.3-95 48.3-131.7-20.4-60.5 1.9-112.3 4.9-120 58.1-5.2 118.5 41.6 123.2 45.3 33-8.9 70.7-13.6 112.9-13.6 42.4 0 80.2 4.9 113.5 13.9 11.3-8.6 67.3-48.8 121.3-43.9 2.9 7.7 24.7 58.3 5.5 118 32.4 36.8 48.9 82.7 48.9 132.3 0 102.2-59 188.1-200 212.9a127.5 127.5 0 0138.1 91v112.5c.8 9 0 17.9 15 17.9 177.1-59.7 304.6-227 304.6-424.1 0-247.2-200.4-447.3-447.5-447.3z"></path></svg>
          </a>
        </li>
      </ul>
      <div class="${d.rsIconWrap} ${d.rsIconWrap}">
        <a href="https://rs.school/" class="${d.socialItem} ${d.rsschoolLink}" target="_blank">
        </a>
      </div>
      <ul class="${d.socialItems} ${d.rsSchool}">
        <li class="${d.socialItem}">
          <a class="${d.socialItemLink}" href="https://github.com/rolling-scopes/rsschool-app" target="_blank">
            <svg viewBox="64 64 896 896" focusable="false" data-icon="github" width="1em" height="1em" fill="#ffffff" aria-hidden="true"><path d="M511.6 76.3C264.3 76.2 64 276.4 64 523.5 64 718.9 189.3 885 363.8 946c23.5 5.9 19.9-10.8 19.9-22.2v-77.5c-135.7 15.9-141.2-73.9-150.3-88.9C215 726 171.5 718 184.5 703c30.9-15.9 62.4 4 98.9 57.9 26.4 39.1 77.9 32.5 104 26 5.7-23.5 17.9-44.5 34.7-60.8-140.6-25.2-199.2-111-199.2-213 0-49.5 16.3-95 48.3-131.7-20.4-60.5 1.9-112.3 4.9-120 58.1-5.2 118.5 41.6 123.2 45.3 33-8.9 70.7-13.6 112.9-13.6 42.4 0 80.2 4.9 113.5 13.9 11.3-8.6 67.3-48.8 121.3-43.9 2.9 7.7 24.7 58.3 5.5 118 32.4 36.8 48.9 82.7 48.9 132.3 0 102.2-59 188.1-200 212.9a127.5 127.5 0 0138.1 91v112.5c.8 9 0 17.9 15 17.9 177.1-59.7 304.6-227 304.6-424.1 0-247.2-200.4-447.3-447.5-447.3z"></path></svg>
          </a>
        </li>
        <li class="${d.socialItem}">
          <a class="${d.socialItemLink}" href="https://www.youtube.com/c/rollingscopesschool" target="_blank">
            <svg viewBox="64 64 896 896" focusable="false" data-icon="youtube" width="1em" height="1em" fill="#ffffff" aria-hidden="true"><path d="M941.3 296.1a112.3 112.3 0 00-79.2-79.3C792.2 198 512 198 512 198s-280.2 0-350.1 18.7A112.12 112.12 0 0082.7 296C64 366 64 512 64 512s0 146 18.7 215.9c10.3 38.6 40.7 69 79.2 79.3C231.8 826 512 826 512 826s280.2 0 350.1-18.8c38.6-10.3 68.9-40.7 79.2-79.3C960 658 960 512 960 512s0-146-18.7-215.9zM423 646V378l232 133-232 135z"></path></svg>
          </a>
        </li>
        <li class="${d.socialItem}">
          <a class="${d.socialItemLink}" href="https://discord.com/invite/PRADsJB" target="_blank">
            <svg width="1em" height="1em" fill="#ffffff" viewBox="0 -7 71 71" xmlns="http://www.w3.org/2000/svg"><g><path d="M60.1045 4.8978C55.5792 2.8214 50.7265 1.2916 45.6527 0.41542C45.5603 0.39851 45.468 0.440769 45.4204 0.525289C44.7963 1.6353 44.105 3.0834 43.6209 4.2216C38.1637 3.4046 32.7345 3.4046 27.3892 4.2216C26.905 3.0581 26.1886 1.6353 25.5617 0.525289C25.5141 0.443589 25.4218 0.40133 25.3294 0.41542C20.2584 1.2888 15.4057 2.8186 10.8776 4.8978C10.8384 4.9147 10.8048 4.9429 10.7825 4.9795C1.57795 18.7309 -0.943561 32.1443 0.293408 45.3914C0.299005 45.4562 0.335386 45.5182 0.385761 45.5576C6.45866 50.0174 12.3413 52.7249 18.1147 54.5195C18.2071 54.5477 18.305 54.5139 18.3638 54.4378C19.7295 52.5728 20.9469 50.6063 21.9907 48.5383C22.0523 48.4172 21.9935 48.2735 21.8676 48.2256C19.9366 47.4931 18.0979 46.6 16.3292 45.5858C16.1893 45.5041 16.1781 45.304 16.3068 45.2082C16.679 44.9293 17.0513 44.6391 17.4067 44.3461C17.471 44.2926 17.5606 44.2813 17.6362 44.3151C29.2558 49.6202 41.8354 49.6202 53.3179 44.3151C53.3935 44.2785 53.4831 44.2898 53.5502 44.3433C53.9057 44.6363 54.2779 44.9293 54.6529 45.2082C54.7816 45.304 54.7732 45.5041 54.6333 45.5858C52.8646 46.6197 51.0259 47.4931 49.0921 48.2228C48.9662 48.2707 48.9102 48.4172 48.9718 48.5383C50.038 50.6034 51.2554 52.5699 52.5959 54.435C52.6519 54.5139 52.7526 54.5477 52.845 54.5195C58.6464 52.7249 64.529 50.0174 70.6019 45.5576C70.6551 45.5182 70.6887 45.459 70.6943 45.3942C72.1747 30.0791 68.2147 16.7757 60.1968 4.9823C60.1772 4.9429 60.1437 4.9147 60.1045 4.8978ZM23.7259 37.3253C20.2276 37.3253 17.3451 34.1136 17.3451 30.1693C17.3451 26.225 20.1717 23.0133 23.7259 23.0133C27.308 23.0133 30.1626 26.2532 30.1066 30.1693C30.1066 34.1136 27.28 37.3253 23.7259 37.3253ZM47.3178 37.3253C43.8196 37.3253 40.9371 34.1136 40.9371 30.1693C40.9371 26.225 43.7636 23.0133 47.3178 23.0133C50.9 23.0133 53.7545 26.2532 53.6986 30.1693C53.6986 34.1136 50.9 37.3253 47.3178 37.3253Z"></path></g></svg>
          </a>
        </li>
      </ul>
    </div>`}}const X="_header-logo_pd7rp_1",K="_header_pd7rp_1",U="_header-container_pd7rp_16",z="_buttons-wrap_pd7rp_25",Z="_button_pd7rp_25",J="_garage-button_pd7rp_45",Q="_winners-button_pd7rp_47",f={"header-logo":"_header-logo_pd7rp_1",headerLogo:X,header:K,"header-container":"_header-container_pd7rp_16",headerContainer:U,"buttons-wrap":"_buttons-wrap_pd7rp_25",buttonsWrap:z,button:Z,"garage-button":"_garage-button_pd7rp_45",garageButton:J,"winners-button":"_winners-button_pd7rp_47",winnersButton:Q};class Y extends c{constructor(){super({tagName:"header",classNames:[f.header]});s(this,"headerContainer");s(this,"headerLogo");s(this,"buttonsWrap");s(this,"garageButton");s(this,"winnersButton");this.headerContainer=new c({tagName:"div",classNames:[f.headerContainer]}),this.append(this.headerContainer),this.headerLogo=new c({tagName:"h2",text:"Async Rase",classNames:[f.headerLogo]}),this.headerContainer.append(this.headerLogo),this.buttonsWrap=new c({tagName:"div",classNames:[f.buttonsWrap]}),this.headerContainer.append(this.buttonsWrap),this.garageButton=new c({tagName:"button",classNames:[f.button,f.garageButton],text:"Garage",attributes:{type:"button",id:"toGarageBtn",disabled:"true"}}),this.buttonsWrap.append(this.garageButton),this.winnersButton=new c({tagName:"button",classNames:[f.button,f.winnersButton],text:"Winners",attributes:{type:"button",id:"toWinnersBtn"}}),this.buttonsWrap.append(this.winnersButton)}}const tt="_garage_1n6tq_1",et="_settings_1n6tq_8",at="_garage-menu_1n6tq_15",nt="_form-wrapper_1n6tq_18",rt="_form_1n6tq_18",st="_car-form_1n6tq_27",ot="_button_1n6tq_33",it="_form-name-input_1n6tq_38",ct="_create-btn_1n6tq_56",lt="_update-btn_1n6tq_58",dt="_race-btn_1n6tq_61",gt="_reset-btn_1n6tq_63",ut="_generate-btn_1n6tq_65",ht="_btn-disabled_1n6tq_67",pt="_garage-menu-buttons_1n6tq_74",mt="_title-wrapper_1n6tq_81",_t="_garage-title_1n6tq_89",bt="_cars-count_1n6tq_92",wt="_page-number_1n6tq_96",ft="_garage-page-number_1n6tq_98",Ct="_garage-race-container_1n6tq_101",p={garage:tt,settings:et,"garage-menu":"_garage-menu_1n6tq_15",garageMenu:at,"form-wrapper":"_form-wrapper_1n6tq_18",formWrapper:nt,form:rt,"car-form":"_car-form_1n6tq_27",carForm:st,button:ot,"form-name-input":"_form-name-input_1n6tq_38",formNameInput:it,"create-btn":"_create-btn_1n6tq_56",createBtn:ct,"update-btn":"_update-btn_1n6tq_58",updateBtn:lt,"race-btn":"_race-btn_1n6tq_61",raceBtn:dt,"reset-btn":"_reset-btn_1n6tq_63",resetBtn:gt,"generate-btn":"_generate-btn_1n6tq_65",generateBtn:ut,"btn-disabled":"_btn-disabled_1n6tq_67",btnDisabled:ht,"garage-menu-buttons":"_garage-menu-buttons_1n6tq_74",garageMenuButtons:pt,"title-wrapper":"_title-wrapper_1n6tq_81",titleWrapper:mt,"garage-title":"_garage-title_1n6tq_89",garageTitle:_t,"cars-count":"_cars-count_1n6tq_92",carsCount:bt,"page-number":"_page-number_1n6tq_96",pageNumber:wt,"garage-page-number":"_garage-page-number_1n6tq_98",garagePageNumber:ft,"garage-race-container":"_garage-race-container_1n6tq_101",garageRaceContainer:Ct},Nt="_pagination_181s8_1",yt="_pagination-wrapper_181s8_7",vt="_pagination-btn_181s8_13",Pt="_prev-btn_181s8_29",Bt="_next-btn_181s8_31",kt="_page-num_181s8_33",$t="_first-page-btn_181s8_41",St="_last-page-btn_181s8_43",h={pagination:Nt,"pagination-wrapper":"_pagination-wrapper_181s8_7",paginationWrapper:yt,"pagination-btn":"_pagination-btn_181s8_13",paginationBtn:vt,"prev-btn":"_prev-btn_181s8_29",prevBtn:Pt,"next-btn":"_next-btn_181s8_31",nextBtn:Bt,"page-num":"_page-num_181s8_33",pageNum:kt,"first-page-btn":"_first-page-btn_181s8_41",firstPageBtn:$t,"last-page-btn":"_last-page-btn_181s8_43",lastPageBtn:St};class S extends c{constructor(t){super({tagName:"div",classNames:[h.pagination]});s(this,"handlers");s(this,"paginationWrapper");s(this,"pageNum");s(this,"firstPageBtn");s(this,"prevBtn");s(this,"nextBtn");s(this,"lastPageBtn");this.handlers=t,this.pageNum=new c({tagName:"div",classNames:[h.paginationBtn,h.pageNum],attributes:{id:`${t.pageName}PageNum`}}),this.firstPageBtn=new c({tagName:"button",text:"<<",classNames:[h.paginationBtn,h.firstPageBtn],attributes:{disabled:"true",id:`${t.pageName}FirstPageBtn`}}),this.prevBtn=new c({tagName:"button",text:"<",classNames:[h.paginationBtn,h.prevBtn],attributes:{disabled:"true",id:`${t.pageName}PrevBtn`}}),this.nextBtn=new c({tagName:"button",text:">",classNames:[h.paginationBtn,h.nextBtn],attributes:{id:`${t.pageName}NextBtn`}}),this.lastPageBtn=new c({tagName:"button",text:">>",classNames:[h.paginationBtn,h.lastPageBtn],attributes:{id:`${t.pageName}LastPageBtn`}}),this.paginationWrapper=new c({tagName:"div",classNames:[h.paginationWrapper],children:[this.firstPageBtn,this.prevBtn,this.pageNum,this.nextBtn,this.lastPageBtn]}),this.append(this.paginationWrapper),this.addEventListenersToButtons()}addEventListenersToButtons(){this.firstPageBtn.getNode().addEventListener("click",this.clickFirstPageButtonHandler.bind(this)),this.prevBtn.getNode().addEventListener("click",this.clickPrevPageButtonHandler.bind(this)),this.nextBtn.getNode().addEventListener("click",this.clickNextPageButtonHandler.bind(this)),this.lastPageBtn.getNode().addEventListener("click",this.clickLastPageButtonHandler.bind(this))}clickFirstPageButtonHandler(){this.handlers.onFirstClick()}clickPrevPageButtonHandler(){this.handlers.onPrevClick()}clickNextPageButtonHandler(){this.handlers.onNextClick()}clickLastPageButtonHandler(){this.handlers.onLastClick()}}const Wt="_car-track-wrap_14thv_1",Lt="_car-track-controls_14thv_7",Et="_button_14thv_14",At="_start-btn_14thv_24",Tt="_stop-btn_14thv_26",It="_select-btn_14thv_28",qt="_delete-btn_14thv_30",xt="_car-name_14thv_32",Mt="_car-track_14thv_1",Rt="_car-icon-wrap_14thv_55",Ht="_car-svg_14thv_60",Gt="_shake_14thv_1",u={"car-track-wrap":"_car-track-wrap_14thv_1",carTrackWrap:Wt,"car-track-controls":"_car-track-controls_14thv_7",carTrackControls:Lt,button:Et,"start-btn":"_start-btn_14thv_24",startBtn:At,"stop-btn":"_stop-btn_14thv_26",stopBtn:Tt,"select-btn":"_select-btn_14thv_28",selectBtn:It,"delete-btn":"_delete-btn_14thv_30",deleteBtn:qt,"car-name":"_car-name_14thv_32",carName:xt,"car-track":"_car-track_14thv_1",carTrack:Mt,"car-icon-wrap":"_car-icon-wrap_14thv_55",carIconWrap:Rt,"car-svg":"_car-svg_14thv_60",carSvg:Ht,shake:Gt};function k(a){return Math.floor(Math.random()*a)}function Ft(a){const e=Math.floor(a/6e4),t=(a%6e4/1e3).toFixed(0);return`${e.toString().padStart(2,"0")}:${t.toString().padStart(2,"0")}`}function jt(a){Array.from(document.querySelectorAll(`#car${a} button`)).forEach(t=>{t.textContent==="Stop"?t.removeAttribute("disabled"):t.setAttribute("disabled","true")})}function Vt(a){Array.from(document.querySelectorAll(`#car${a} button`)).forEach(t=>{t.textContent==="Stop"?t.setAttribute("disabled","true"):t.removeAttribute("disabled")})}function Dt(a){Array.from(document.querySelectorAll(`#car${a} button`)).forEach(t=>{t.setAttribute("disabled","true")})}const Ot=""+new URL("car-engine-starting-43705-a5XnkePA.mp3",import.meta.url).href;function Xt(a,e,t,n){const r=document.querySelector(`#car${t} #carIconWrap${t}`);jt(t);let o;const i=Date.now(),l=0,g=n/1.1,w=g/(a/e/1e3),N=()=>{const v=Date.now()-i,T=w*v/1e3,B=Math.min(l+T,g);if(r.style.transform=`translateX(${B}px)`,B<g&&r.getAttribute("engine")==="started")requestAnimationFrame(N);else if(B<g&&r.getAttribute("engine")==="burn")cancelAnimationFrame(o);else{const I=Ft(v);console.log("FINISH IN: ",I)}};o=requestAnimationFrame(N)}function Kt(a,e){const t=new Audio(Ot);t.playbackRate=a,t.currentTime=e,t.play()}const _="http://localhost:3000",b={garage:"/garage",engine:"/engine",winners:"/winners"},Ut=async(a,e)=>{const t=await fetch(`${_}${b.garage}?_page=${a}&_limit=${e}`),n=await t.json(),r=Number(t.headers.get("X-Total-Count"));return[n,r]},$=async a=>{try{if(!(await fetch(`${_}${b.garage}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)})).ok)throw new Error("Failed to update server state")}catch(e){console.error("Error updating server state:",e)}},zt=async a=>{const e=a;try{const t=await fetch(`${_}${b.garage}/${e}`,{method:"DELETE"});t.ok||console.error("Failed to delete car. Status:",t.status)}catch(t){console.error("Error updating server state:",t)}},Zt=async a=>{const{id:e}=a;try{if(!(await fetch(`${_}${b.garage}/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)})).ok)throw new Error("Failed to update server state")}catch(t){console.error("Error updating server state:",t)}},Jt=async(a,e)=>{try{const t=await fetch(`${_}${b.winners}?_page=${a}&_limit=${e}`),n=Number(t.headers.get("X-Total-Count"))||0;return[await t.json(),n]}catch(t){throw console.log("getWinnersByPage error",t),t}},Qt=async a=>{const e=a;return await(await fetch(`${_}${b.garage}/${e}`)).json()},Yt=async a=>{const e=a;try{const t=await fetch(`${_}${b.winners}/${e}`,{method:"DELETE"});t.ok||console.error("Failed to delete car. Status:",t.status)}catch(t){console.error("Error updating server state:",t)}};async function te(a){return await(await fetch(`${_}${b.engine}?id=${a}&status=started`,{method:"PATCH"})).json()}async function ee(a){const t=await(await fetch(`${_}${b.engine}?id=${a}&status=stopped`,{method:"PATCH"})).json();return console.log(`Car with ID ${a} was stopped`),setTimeout(()=>{Vt(a)},500),t}async function ae(a){var e;try{const t=await fetch(`${_}${b.engine}?id=${a}&status=drive`,{method:"PATCH"});t.status===500?document.querySelector(`#car${a} #carIconWrap${a}`).setAttribute("engine","burn"):((e=document.querySelector("#startBtn"))==null||e.removeAttribute("disabled"),console.error("Failed to switch to drive mode:",t.status))}catch(t){console.error("Error switching to drive mode:",t)}}async function ne(a,e,t,n){Kt(1,1),document.querySelector(`#car${t} #carIconWrap${t}`).setAttribute("engine","started"),Xt(a,e,t,n),await ae(t)}function re(){const a=document.querySelector("#toGarageBtn"),e=document.querySelector("#toWinnersBtn"),t=document.querySelector("#winnersSection"),n=document.querySelector("#garageSection");a.addEventListener("click",()=>{window.location.hash="garage",n.style.display="flex",t.style.display="none",a.setAttribute("disabled","true"),e.removeAttribute("disabled")}),e.addEventListener("click",()=>{window.location.hash="winners",t.style.display="flex",n.style.display="none",e.setAttribute("disabled","true"),a.removeAttribute("disabled")})}function W(a,e,t,n=1){const r=document.querySelector(`#${t}CarsCount h2`),o=t==="garage"?"Cars in Garage:":"Total Winners:";r&&(r.innerHTML=`<h2>${o} ( ${a} )</h2>`);const i=document.querySelector(`#${t}pageNumber`);i&&(i.textContent=`Page: ( № ${e} / ${n})`)}async function se(a,e){const[t,n]=await Ut(a,e);return[await t,n]}async function oe(a,e){const[t,n]=await Jt(a,e);return[await t,n]}function C(a,e,t){const n=document.querySelector(`#${t}FirstPageBtn`),r=document.querySelector(`#${t}PrevBtn`),o=document.querySelector(`#${t}NextBtn`),i=document.querySelector(`#${t}LastPageBtn`);a>1?(n.removeAttribute("disabled"),r.removeAttribute("disabled")):(n.setAttribute("disabled","true"),r.setAttribute("disabled","true")),a<e?(i.removeAttribute("disabled"),o.removeAttribute("disabled")):(i.setAttribute("disabled","true"),o.setAttribute("disabled","true"))}function L(a,e,t){const n=document.createElementNS("http://www.w3.org/2000/svg","svg"),r=document.createElementNS("http://www.w3.org/2000/svg","use");return r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",`./sprite.svg#car${e%7+1}`),n.classList.add(a.carSvg),n.style.fill=t,n.append(r),n}class ie{constructor(e){s(this,"id");s(this,"name");s(this,"color");s(this,"element");s(this,"handlers");this.id=e.id,this.name=e.name,this.color=e.color,this.element=this.createCarElement(),this.handlers=e}createCarElement(){const e=new c({tagName:"button",text:"Start",classNames:[u.startBtn,u.button],attributes:{id:`startBtn${this.id}`}}),t=new c({tagName:"button",text:"Stop",classNames:[u.stopBtn,u.button],attributes:{disabled:"true",id:`stopBtn${this.id}`}}),n=new c({tagName:"button",text:"Select",classNames:[u.selectBtn,u.button]}),r=new c({tagName:"button",text:"Delete",classNames:[u.deleteBtn,u.button]}),o=new c({tagName:"span",text:`${this.name}`,classNames:[u.carName],attributes:{"data-id":`${this.id}`}}),i=new c({tagName:"div",classNames:[u.carTrackControls],children:[e,t,n,r,o]});this.clickHandler(e,t,n,r);const l=L(u,this.id,this.color),g=new c({tagName:"div",classNames:[u.carIconWrap],attributes:{id:`carIconWrap${this.id}`}});g.getNode().appendChild(l);const w=new c({tagName:"div",classNames:[u.carTrack],children:[g]});return new c({tagName:"div",classNames:[u.carTrackWrap],children:[w,i],attributes:{id:`car${this.id}`}})}clickHandler(e,t,n,r){e.getNode().addEventListener("click",this.clickStartButtonHandler.bind(this)),t.getNode().addEventListener("click",this.clickStopButtonHandler.bind(this)),n.getNode().addEventListener("click",this.clickSelectButtonHandler.bind(this)),r.getNode().addEventListener("click",this.clickDeleteButtonHandler.bind(this))}clickSelectButtonHandler(){const{color:e}=this,{name:t}=this,{id:n}=this,r=document.querySelector("#update-car-name"),o=document.querySelector("#update-car-color"),i=document.querySelector("#updateBtn");i.disabled=!1,r.value=t,o.value=e,r.setAttribute("car-id",`${n}`)}clickDeleteButtonHandler(){this.handlers.onDeleteClick({id:this.id})}clickStartButtonHandler(){this.handlers.onStartClick({id:this.id})}clickStopButtonHandler(){this.handlers.onStopClick({id:this.id})}getElement(){return this.element.getNode()}}const ce=["Acura","Alfa Romeo","Alpine","Apollo","Apple","Aston Martin","Audi","Automobili Pininfarina","Bentley","BMW","Bollinger","Bosch","Brilliance","Bugatti","Buick","BYD","Cadillac","Chana","Changan","Chery","Chevrolet","Chrysler","Citroen","Continental","CUPRA","Dacia","Daewoo","Daihatsu","Datsun","Delfast","Ferrari","Fiat","Fisker","Ford","Foxtron","Geely","Genesis","GMC","Hummer","Hyundai","Ineos","Infiniti","KIA","Koenigsegg","Lada","Lamborghini","Lancia","Land Rover","Lexus","Lifan","Nissan","Opel","Pagani","Peugeot","Polestar","Porsche","Qoros","Range Rover","Ravon","Renault","Skoda","Toyota","VinFast","Volkswagen","Volvo","WOG","Xiaomi","Xpeng","Yamaha","Zotye","ЗАЗ","КрАЗ"],le=["Q1","A5","Model S","Model L","Model XL","Model M","Q5","V8","GLC","Sedan","X7 (G07) 2018","X5 (G05) 2018","M5 Sedan (F90) 2017"];class de{constructor(){s(this,"makes");s(this,"models");this.makes=ce,this.models=le}getRandomColor(){const e=Math.floor(Math.random()*256),t=Math.floor(Math.random()*256),n=Math.floor(Math.random()*256),r=e.toString(16).padStart(2,"0"),o=t.toString(16).padStart(2,"0"),i=n.toString(16).padStart(2,"0");return`#${r}${o}${i}`}generateRandomName(){const e=k(this.makes.length),t=k(this.models.length);return`${this.makes[e]} ${this.models[t]}`}generateRandomCar(){return{name:this.generateRandomName(),color:this.getRandomColor()}}}function ge(a){return`
      <div class="${a.formWrapper}">
        <div class="${a.form}">
          <form action="" class="${a.carForm}" id="create-car">
            <input class="${a.formNameInput}" type="text" id="create-car-name" name="car-name" minlength="3" placeholder="Car name (min 3 symbols)"><br>
            <input type="color" id="create-car-color" name="car-color" value="#ffffff">
            <button type="button" class="${a.createBtn} ${a.button}" id="createBtn" disabled>Create</button>
          </form>
        </div>
        <div class="${a.form}">
          <form action="" class="${a.carForm}" id="update-car">
            <input class="${a.formNameInput}" type="text" id="update-car-name" name="car-name" minlength="3" placeholder="Select car with select button"><br>
            <input type="color" id="update-car-color" name="car-color" value="#ffffff">
            <button type="button" class="${a.updateBtn} ${a.button}" disabled id="updateBtn">Update</button>
          </form>
        </div>
      </div>
      <div class="${a.garageMenuButtons}">
        <button class="${a.raceBtn} ${a.button}">Start Race</button>
        <button class="${a.resetBtn} ${a.button}" disabled>Reset</button>
        <button class="${a.generateBtn} ${a.button}">Generate cars</button>
      </div>`}function E(a,e,t){return`
        <div class="${e.carsCount}" id="${t}CarsCount">
          <h2>Total Winners: 1 </h2>
        </div>
        <div class="${e.garagePageNumber}">
          <h3 class="${e.pageNumber}" data-page="${a}" id="${t}pageNumber">Page: ( № ${a} )</h3>
        </div>
    `}class ue{constructor(){s(this,"listeners",{})}subscribe(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)}emit(e,t){const n=this.listeners[e];n&&n.forEach(r=>r(t))}}const A=new ue;class he extends c{constructor(){super({tagName:"section",classNames:[p.garage],attributes:{id:"garageSection"}});s(this,"formWrap");s(this,"titleWrap");s(this,"garageRaceContainer");s(this,"CARS_LIMIT",7);s(this,"currentPage",1);s(this,"lastPage",1);s(this,"paginationWrap");s(this,"CarModelGenerator",new de);s(this,"onDeleteCar",async t=>{await zt(t.id),A.emit("carDeleted",{carId:t.id}),await Yt(t.id),await this.createGarageView(this.garageRaceContainer.getNode(),this.currentPage,this.CARS_LIMIT)});s(this,"onStartCar",async t=>{var l;const n=((l=document.querySelector(`#car${t.id}`))==null?void 0:l.clientWidth)||0;Dt(t.id);const{velocity:r,distance:o}=await te(t.id),i=o/r;console.log(`
    car with id="${t.id}" Started
    velocity: ${r}
    distance: ${o}
    transitionTime: ${i}
    `),ne(o,r,t.id,n)});s(this,"onStopCar",async t=>{ee(t.id)});s(this,"onFirstClick",async()=>{this.currentPage=1,await this.createGarageView(this.garageRaceContainer.getNode(),this.currentPage,this.CARS_LIMIT),this.setPaginationPageNum(),C(this.currentPage,this.lastPage,"garage")});s(this,"onPrevClick",async()=>{this.currentPage-=1,await this.createGarageView(this.garageRaceContainer.getNode(),this.currentPage,this.CARS_LIMIT),this.setPaginationPageNum(),C(this.currentPage,this.lastPage,"garage")});s(this,"onNextClick",async()=>{this.currentPage+=1,await this.createGarageView(this.garageRaceContainer.getNode(),this.currentPage,this.CARS_LIMIT),this.setPaginationPageNum(),C(this.currentPage,this.lastPage,"garage")});s(this,"onLastClick",async()=>{this.currentPage=this.lastPage,await this.createGarageView(this.garageRaceContainer.getNode(),this.currentPage,this.CARS_LIMIT),this.setPaginationPageNum(),C(this.currentPage,this.lastPage,"garage")});s(this,"createBtnClickHandler",async()=>{const t=this.children[0].getNode().querySelector("#create-car-name"),n=t.value,r=this.children[0].getNode().querySelector("#create-car-color"),o=r.value;try{await $({name:n,color:o})}catch{throw new Error}this.createGarageView(this.garageRaceContainer.getNode(),this.currentPage,this.CARS_LIMIT),t.value="",r.value="#ffffff";const i=this.children[0].getNode().querySelector(`.${p.createBtn}`);i.disabled=!0});this.titleWrap=new c({tagName:"div",classNames:[p.titleWrapper]}),this.garageRaceContainer=new c({tagName:"div",classNames:[p.garageRaceContainer]}),this.formWrap=new c({tagName:"div",classNames:[p.settings]}),this.formWrap.getNode().innerHTML=this.createFormWrapper(),this.titleWrap.getNode().innerHTML=this.createGarageTitle(this.currentPage),this.paginationWrap=new S({onFirstClick:this.onFirstClick,onPrevClick:this.onPrevClick,onNextClick:this.onNextClick,onLastClick:this.onLastClick,pageName:"garage"}),this.appendElements(this.formWrap,this.titleWrap,this.garageRaceContainer,this.paginationWrap),this.createGarageView(this.garageRaceContainer.getNode(),this.currentPage,this.CARS_LIMIT),this.generateBtnAddListener(),this.setPaginationPageNum(),this.togglePagination()}setPaginationPageNum(){const t=this.paginationWrap.getNode().querySelector("#garagePageNum");t.textContent=this.currentPage.toString()}createBtnAddListener(){const t=this.formWrap.getNode().querySelector("#create-car-name");t==null||t.addEventListener("input",this.createCarNameInputHandler.bind(this));const n=this.formWrap.getNode().querySelector(`.${p.createBtn}`);n==null||n.addEventListener("click",this.createBtnClickHandler)}updateBtnAddListener(){var t;(t=this.formWrap.getNode().querySelector(`.${p.updateBtn}`))==null||t.addEventListener("click",this.updateBtnClickHandler.bind(this))}generateBtnAddListener(){const t=this.formWrap.getNode().querySelector(`.${p.generateBtn}`);t==null||t.addEventListener("click",this.generateBtnClickHandler.bind(this))}appendElements(t,n,r,o){this.append(t),this.append(n),this.append(r),this.append(o)}async createGarageView(t,n,r){const[o,i]=await se(n,r);this.createBtnAddListener(),this.updateBtnAddListener();const l=t;l.innerHTML="",o.forEach(g=>{const N=new ie({...g,onDeleteClick:this.onDeleteCar,onStartClick:this.onStartCar,onStopClick:this.onStopCar}).getElement();l==null||l.append(N)}),this.lastPage=this.updateLastPage(i),W(i,n,"garage",this.lastPage),this.togglePagination()}updateLastPage(t){return Math.ceil(t/this.CARS_LIMIT)}togglePagination(){const t=this.paginationWrap.getNode().querySelector("#garageNextBtn"),n=this.paginationWrap.getNode().querySelector("#garageLastPageBtn");this.lastPage===1?(t.setAttribute("disabled","true"),n.setAttribute("disabled","true")):this.lastPage>1&&(t.removeAttribute("disabled"),n.removeAttribute("disabled"))}createCarNameInputHandler(){const t=this.children[0].getNode().querySelector(`.${p.createBtn}`),n=this.children[0].getNode().querySelector("#create-car-name");t.disabled=n.value.length<3}async updateBtnClickHandler(){const t=this.children[0].getNode().querySelector("#update-car-name"),n=t.value,r=this.children[0].getNode().querySelector("#update-car-color"),o=r.value,i=Number(t.getAttribute("car-id"));try{await Zt({id:i,name:n,color:o})}catch{throw new Error}this.createGarageView(this.garageRaceContainer.getNode(),this.currentPage,this.CARS_LIMIT),t.value="",r.value="#ffffff";const l=document.querySelector("#updateBtn");l.disabled=!0}generateBtnClickHandler(){this.hundredCarGeneration(),this.createGarageView(this.garageRaceContainer.getNode(),this.currentPage,this.CARS_LIMIT)}async hundredCarGeneration(){const n=[...Array(100)].map(()=>this.CarModelGenerator.generateRandomCar()).map(r=>$(r));await Promise.all(n)}createFormWrapper(){return ge(p)}createGarageTitle(t){return E(t,p,"garage")}}const pe="_winners_167w2_1",me="_title-wrapper_167w2_11",_e="_winners-table-container_167w2_20",P={winners:pe,"title-wrapper":"_title-wrapper_167w2_11",titleWrapper:me,"winners-table-container":"_winners-table-container_167w2_20",winnersTableContainer:_e},be="_score-table_5jy3k_1",we="_score-title_5jy3k_8",fe="_score-headers_5jy3k_25",Ce="_score-headers-items_5jy3k_33",Ne="_score-headers-position_5jy3k_35",ye="_score-table-body_5jy3k_37",ve="_score-row_5jy3k_41",Pe="_car-img_5jy3k_43",Be="_car-name_5jy3k_46",ke="_wins-count_5jy3k_50",$e="_timeValue_5jy3k_54",Se="_car-svg_5jy3k_64",m={"score-table":"_score-table_5jy3k_1",scoreTable:be,"score-title":"_score-title_5jy3k_8",scoreTitle:we,"score-headers":"_score-headers_5jy3k_25",scoreHeaders:fe,"score-headers-items":"_score-headers-items_5jy3k_33",scoreHeadersItems:Ce,"score-headers-position":"_score-headers-position_5jy3k_35",scoreHeadersPosition:Ne,"score-table-body":"_score-table-body_5jy3k_37",scoreTableBody:ye,"score-row":"_score-row_5jy3k_41",scoreRow:ve,"car-img":"_car-img_5jy3k_43",carImg:Pe,"car-name":"_car-name_5jy3k_46",carName:Be,"wins-count":"_wins-count_5jy3k_50",winsCount:ke,timeValue:$e,"car-svg":"_car-svg_5jy3k_64",carSvg:Se};function y(){return`
  <table class="${m.scoreTable}">
    <thead class="${m.scoreHeaders}">
      <tr class="${m.scoreHeadersItems}">
        <th class="${m.scoreHeadersPosition} scope="col" id="colNum">№.</th>
        <th class="${m.carImg} scope="col" id="carImg">Car</th>
        <th class="${m.carName} scope="col" id="carName">Car Name</th>
        <th class="${m.winsCount} scope="col" id="winsCount">Wins</th>
        <th class="${m.timeValue} scope="col" id="timeValue">Best Time, s</th>
      </tr>
    </thead>
    <tbody class="${m.scoreTableBody}">
      
    </tbody>
    <tfoot class="${m.scoreFooter}">
    </tfoot>
  </table>
  `}class We{constructor(e,t,n){s(this,"rowNum");s(this,"id");s(this,"wins");s(this,"time");s(this,"color","");s(this,"carName","");s(this,"element");this.rowNum=n,this.id=e.id,this.wins=e.wins,this.time=e.time,this.color=t.color,this.carName=t.name,this.element=this.createWinnerLineComponent()}createWinnerLineComponent(){const e=new c({tagName:"tr"}),t=L(m,this.id,this.color),n=document.createElement("th");n.setAttribute("scope","row"),n.textContent=this.rowNum.toString();const r=document.createElement("td");r.textContent=this.carName;const o=document.createElement("td");o.textContent=this.wins.toString();const i=document.createElement("td");i.textContent=this.time.toString();const l=document.createElement("td");return l.appendChild(t),e.getNode().appendChild(n),e.getNode().appendChild(l),e.getNode().appendChild(r),e.getNode().appendChild(o),e.getNode().appendChild(i),e}getElement(){return this.element.getNode()}}class Le extends c{constructor(){super({tagName:"section",classNames:[P.winners],attributes:{id:"winnersSection"}});s(this,"titleWrap");s(this,"winnersTableContainer");s(this,"rowNum",1);s(this,"WINNES_PER_PAGE",10);s(this,"currentPage",1);s(this,"lastPage",1);s(this,"paginationWrap");s(this,"onFirstClick",async()=>{this.currentPage=1,this.winnersTableContainer.destroyChildren(),this.winnersTableContainer.getNode().innerHTML=y(),await this.createWinnerView(this.currentPage,this.WINNES_PER_PAGE),this.setPaginationPageNum(),C(this.currentPage,this.lastPage,"winner")});s(this,"onPrevClick",async()=>{this.currentPage-=1,this.winnersTableContainer.destroyChildren(),this.winnersTableContainer.getNode().innerHTML=y(),await this.createWinnerView(this.currentPage,this.WINNES_PER_PAGE),this.setPaginationPageNum(),C(this.currentPage,this.lastPage,"winner")});s(this,"onNextClick",async()=>{this.currentPage+=1,this.winnersTableContainer.destroyChildren(),this.winnersTableContainer.getNode().innerHTML=y(),await this.createWinnerView(this.currentPage,this.WINNES_PER_PAGE),this.setPaginationPageNum(),C(this.currentPage,this.lastPage,"winner")});s(this,"onLastClick",async()=>{this.currentPage=this.lastPage,this.winnersTableContainer.destroyChildren(),this.winnersTableContainer.getNode().innerHTML=y(),await this.createWinnerView(this.currentPage,this.WINNES_PER_PAGE),this.setPaginationPageNum(),C(this.currentPage,this.lastPage,"winner")});this.titleWrap=new c({tagName:"div",classNames:[P.titleWrapper]}),this.titleWrap.getNode().innerHTML=this.createWinnersTitle(this.currentPage),this.winnersTableContainer=new c({tagName:"div",classNames:[P.winnersTableContainer]}),this.paginationWrap=new S({onFirstClick:this.onFirstClick,onPrevClick:this.onPrevClick,onNextClick:this.onNextClick,onLastClick:this.onLastClick,pageName:"winner"}),this.appendElements(this.titleWrap,this.winnersTableContainer,this.paginationWrap),this.createWinnerView(this.currentPage,this.WINNES_PER_PAGE),this.setPaginationPageNum(),this.togglePagination(),A.subscribe("carDeleted",async()=>{this.rowNum=1,this.winnersTableContainer.destroyChildren(),this.winnersTableContainer.getNode().innerHTML=y(),await this.createWinnerView(this.currentPage,this.WINNES_PER_PAGE),this.setPaginationPageNum()})}appendElements(t,n,r){const o=n;o.getNode().innerHTML=y(),this.append(t),this.append(n),this.append(r)}createWinnersTitle(t){return E(t,P,"winners")}togglePagination(){const t=this.paginationWrap.getNode().querySelector("#winnerNextBtn"),n=this.paginationWrap.getNode().querySelector("#winnerLastPageBtn");this.lastPage===1?(t.setAttribute("disabled","true"),n.setAttribute("disabled","true")):this.lastPage>1&&(t.removeAttribute("disabled"),n.removeAttribute("disabled"))}updateLastPage(t){return Math.ceil(t/this.WINNES_PER_PAGE)}async createWinnerView(t,n){const[r,o]=await oe(t,n),i=this.winnersTableContainer.getNode().querySelector("tbody");t===1?this.rowNum=1:this.rowNum=+`${t-1}1`;for(const l of r){const{id:g}=l;try{const w=await Qt(g),v=new We(l,w,this.rowNum).getElement();i==null||i.append(v)}catch(w){console.error("Error fetching winner car:",w)}this.rowNum+=1}this.lastPage=this.updateLastPage(o),W(o,t,"winners",this.lastPage),this.togglePagination()}setPaginationPageNum(){const t=this.paginationWrap.getNode().querySelector("#winnerPageNum");t.textContent=this.currentPage.toString()}}class Ee extends c{constructor(){const e=new he,t=new Le,n=new Y,r=new c({tagName:"main",classNames:["main"],children:[e,t]}),o=new O;super({tagName:"div",classNames:["site-wrapper"],children:[n,r,o]})}}const Ae=()=>new Ee;class Te{constructor(e,t){s(this,"siteWrapper");s(this,"root");this.siteWrapper=e,this.root=t}start(){this.root.append(this.siteWrapper.getNode()),re()}}const Ie=new Te(Ae(),document.body);Ie.start();
